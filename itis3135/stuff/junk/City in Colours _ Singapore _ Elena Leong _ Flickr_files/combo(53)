YUI.add("hermes-template-notif-item-comment-after-your-comment",function(t,e){var a=t.Template.Handlebars.revive({compiler:[8,">= 4.3.0"],main:function(t,e,a,n,i){var o,r=t.lookupProperty||function(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]};return'<div class="notification-item notif-item-comment-after-your-comment">\n'+(null!=(o=t.invokePartial(r(n,"notification-avatar"),e,{name:"notification-avatar",hash:{data:null!=e?r(e,"avatarData"):e},data:i,indent:"\t",helpers:a,partials:n,decorators:t.decorators}))?o:"")+'\n\t<div class="notification-item-middle">\n'+(null!=(o=t.invokePartial(r(n,"notification-core"),e,{name:"notification-core",hash:{timestamp:null!=e?r(e,"timestamp"):e,subtitle:null!=e?r(e,"subtitle"):e,headline:null!=e?r(e,"headline"):e},data:i,indent:"\t\t",helpers:a,partials:n,decorators:t.decorators}))?o:"")+'\t</div>\n\n\t<div class="thumb-container">\n'+(null!=(o=t.invokePartial(r(n,"notification-photo-thumb"),e,{name:"notification-photo-thumb",hash:{overlay:"comment",photo:null!=e?r(e,"photo"):e},data:i,indent:"\t\t",helpers:a,partials:n,decorators:t.decorators}))?o:"")+'\t</div>\n\n\t<div class="context-menu-container">\n'+(null!=(o=t.invokePartial(r(n,"notification-context-menu-button"),e,{name:"notification-context-menu-button",data:i,indent:"\t\t",helpers:a,partials:n,decorators:t.decorators}))?o:"")+"\t</div>\n</div>\n"},usePartial:!0,useData:!0}),n={};t.Array.each(["notification-avatar","notification-core","notification-photo-thumb","notification-context-menu-button"],function(e){var a=t.Template.get("hermes/"+e);a&&(n[e]=a)}),t.Template.register("hermes/notif-item-comment-after-your-comment",function(e,i){return i=i||{},i.partials=i.partials?t.merge(n,i.partials):n,a(e,i)})},"@VERSION@",{requires:["template-base","handlebars-base","hermes-template-notification-avatar","hermes-template-notification-core","hermes-template-notification-photo-thumb","hermes-template-notification-context-menu-button"]});YUI.add("hermes-template-notif-item-group-cover-photo",function(t,a){var e=t.Template.Handlebars.revive({compiler:[8,">= 4.3.0"],main:function(t,a,e,n,i){var o,r=t.lookupProperty||function(t,a){if(Object.prototype.hasOwnProperty.call(t,a))return t[a]};return'\n<div class="notification-item notif-item-group-cover-photo">\n'+(null!=(o=t.invokePartial(r(n,"notification-avatar"),a,{name:"notification-avatar",hash:{data:null!=a?r(a,"avatarData"):a},data:i,indent:"\t",helpers:e,partials:n,decorators:t.decorators}))?o:"")+'\n\t<div class="notification-item-middle">\n'+(null!=(o=t.invokePartial(r(n,"notification-core"),a,{name:"notification-core",hash:{timestamp:null!=a?r(a,"timestamp"):a,subtitle:null!=a?r(a,"subtitle"):a,headline:null!=a?r(a,"headline"):a},data:i,indent:"\t\t",helpers:e,partials:n,decorators:t.decorators}))?o:"")+'\t</div>\n\n\t<div class="thumb-container">\n'+(null!=(o=t.invokePartial(r(n,"notification-photo-thumb"),a,{name:"notification-photo-thumb",hash:{photo:null!=a?r(a,"photo"):a},data:i,indent:"\t\t",helpers:e,partials:n,decorators:t.decorators}))?o:"")+'\t</div>\n\n\t<div class="context-menu-container">\n'+(null!=(o=t.invokePartial(r(n,"notification-context-menu-button"),a,{name:"notification-context-menu-button",data:i,indent:"\t\t",helpers:e,partials:n,decorators:t.decorators}))?o:"")+"\t</div>\n</div>\n"},usePartial:!0,useData:!0}),n={};t.Array.each(["notification-avatar","notification-core","notification-photo-thumb","notification-context-menu-button"],function(a){var e=t.Template.get("hermes/"+a);e&&(n[a]=e)}),t.Template.register("hermes/notif-item-group-cover-photo",function(a,i){return i=i||{},i.partials=i.partials?t.merge(n,i.partials):n,e(a,i)})},"@VERSION@",{requires:["template-base","handlebars-base","hermes-template-notification-avatar","hermes-template-notification-core","hermes-template-notification-photo-thumb","hermes-template-notification-context-menu-button"]});YUI.add("hermes-template-notif-item-group-join-request-accepted",function(t,e){var a=t.Template.Handlebars.revive({compiler:[8,">= 4.3.0"],main:function(t,e,a,n,i){var o,r=t.lookupProperty||function(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]};return'<div class="notification-item notif-item-group-join-request-accepted">\n'+(null!=(o=t.invokePartial(r(n,"notification-avatar"),e,{name:"notification-avatar",hash:{data:null!=e?r(e,"avatarData"):e},data:i,indent:"\t",helpers:a,partials:n,decorators:t.decorators}))?o:"")+'\n\t<div class="notification-item-middle">\n'+(null!=(o=t.invokePartial(r(n,"notification-core"),e,{name:"notification-core",hash:{timestamp:null!=e?r(e,"timestamp"):e,subtitle:null!=e?r(e,"subtitle"):e,headline:null!=e?r(e,"headline"):e},data:i,indent:"\t\t",helpers:a,partials:n,decorators:t.decorators}))?o:"")+'\t</div>\n\n\t<div class="context-menu-container">\n'+(null!=(o=t.invokePartial(r(n,"notification-context-menu-button"),e,{name:"notification-context-menu-button",data:i,indent:"\t\t",helpers:a,partials:n,decorators:t.decorators}))?o:"")+"\t</div>\n</div>\n"},usePartial:!0,useData:!0}),n={};t.Array.each(["notification-avatar","notification-core","notification-context-menu-button"],function(e){var a=t.Template.get("hermes/"+e);a&&(n[e]=a)}),t.Template.register("hermes/notif-item-group-join-request-accepted",function(e,i){return i=i||{},i.partials=i.partials?t.merge(n,i.partials):n,a(e,i)})},"@VERSION@",{requires:["template-base","handlebars-base","hermes-template-notification-avatar","hermes-template-notification-core","hermes-template-notification-context-menu-button"]});YUI.add("notifications-helper",function(t,e){var n=require("hermes-core/flog")(e),i={fave:"notif-item-fave",comment:"notif-item-comment",reply_reply:"notif-item-reply-reply",group_topic_new:"notif-item-group-topic-new",contacted:"notif-item-contacted",group_invite:"notif-item-group-invite",note:"notif-item-note",tag:"notif-item-tag",people:"notif-item-people",testimonial:"notif-item-testimonial",group_user_invite:"notif-item-group-user-invite",flickrmail:"notif-item-flickrmail",photo_comment_mention:"notif-item-photo-comment-mention",gallery:"notif-item-gallery",gallery_comment:"notif-item-gallery-comment",share:"notif-item-share",photo_accepted:"notif-item-photo-accepted",photo_declined:"notif-item-photo-declined",photo_mention:"notif-item-photo-mention",group_blast:"notif-item-group-blast",group_rules:"notif-item-group-rules",group_description:"notif-item-group-description",group_photo_request:"notif-item-group-photo-request",group_join_request:"notif-item-group-join-request",upload:"notif-item-upload",photo_bot_moderated:"notif-item-moderated",comment_after_your_comment:"notif-item-comment-after-your-comment",group_cover_photo:"notif-item-group-cover-photo",group_join_request_accepted:"notif-item-group-join-request-accepted"};t.NotificationsHelper=function(e,o){function a(t){var e=t.getSizeToFit({width:y,height:y},{sizes:t.getValue("sizes"),cropToFit:!0,includeSquare:!0});return{id:t.getValue("id"),url:t.getValue("url"),displayUrl:e.displayUrl,needsInterstitial:t.getValue("needsInterstitial"),counts:{comments:t.getValue("engagement").getValue("commentCount"),faves:t.getValue("engagement").getValue("faveCount")}}}function r(e){var n=[],i=[],o=[],a=[],r={},l=[];return e.activityData.users&&(e.activityData.users.forEach(function(t){i.push(d.person.extractEntityModel(t))}),n.push(t.Promise.all(i).then(function(t){return a=t,t}))),Object.keys(d).forEach(function(t){e.activityData[t]&&n.push(d[t].extractEntityModel(e.activityData[t]).then(function(e){return r[t]=e,e}))}),e.eventDataList.forEach(function(e){var n=[],i={};Object.keys(d).forEach(function(t){e[t]&&n.push(d[t].extractEntityModel(e[t]).then(function(e){return i[t]=e,e}))}),o.push(t.Promise.all(n).then(function(){return i}))}),n.push(t.Promise.all(o).then(function(t){return l=t,t})),t.Promise.all(n).then(function(){return{userModels:a,activityEntityModels:r,eventEntityModelsList:l}})}function l(t,e){return t.setValue("isContact",e),t.remoteUpdate().catch(function(e){t.setValue("isContact",!1),n.error({err:e})})}function s(e,i){return e.setValue("isIgnored",i),i&&e.setValue("isContact",!1),e.remoteUpdate().then(function(){i&&t.fire("notifications:userBlocked",{relationshipModel:e,isBlocked:i})}).catch(function(t){e.setValue("isContact",!1),n.error({err:t})})}function u(t,e){var n=M&&"page"===e.containerType?500:30;return t.length>n?t.substring(0,n)+"â€¦":t}function c(t,e){return t?M&&"page"===e.containerType?t.replace(/(\r\n|\n|\r)/gm,"<br>"):t:""}function p(t,e,n){var i;switch(e){case"person":i=t.getValue("buddyicon")[M?"medium":"small"];break;case"group":i=t.getValue("iconurls")[M?"medium":"small"]}return{id:t.getValue("id"),type:e,url:t.getValue("url"),iconUrl:i,iconClass:M&&"page"===n.containerType?"small":"tiny"}}function m(e,n,i){t.Analytics.setDataLayerProp("notifications.notificationType",e.type),t.Analytics.setDataLayerProp("notifications.actionType","Context Menu Action: "+n),t.Analytics.setDataLayerProp("notifications.location",i),t.Analytics.sendClick("","Notification Action"),t.Analytics.setDataLayerProp("notifications.notificationType",""),t.Analytics.setDataLayerProp("notifications.actionType",""),t.Analytics.setDataLayerProp("notifications.location","")}function g(t,e){var n,i="mute"===e;switch(t){case"fave":n=i?"notifications.MUTE_THIS_FAVE_NOTIFICATION":"notifications.UNMUTE_THIS_FAVE_NOTIFICATION";break;case"comment":n=i?"notifications.MUTE_THIS_PHOTO_COMMENT_NOTIFICATION":"notifications.UNMUTE_THIS_PHOTO_COMMENT_NOTIFICATION";break;case"photo_comment_mention":n=i?"notifications.MUTE_THIS_COMMENT_MENTIONS_NOTIFICATION":"notifications.UNMUTE_THIS_COMMENT_MENTIONS_NOTIFICATION";break;case"note":n=i?"notifications.MUTE_THIS_PHOTO_NOTE_NOTIFICATION":"notifications.UNMUTE_THIS_PHOTO_NOTE_NOTIFICATION";break;case"comment_after_your_comment":n=i?"notifications.MUTE_THIS_COMMENT_AFTER_NOTIFICATION":"notifications.UNMUTE_THIS_COMMENT_AFTER_NOTIFICATION";break;case"tag":case"people":n=i?"notifications.MUTE_THIS_TAG_NOTIFICATION":"notifications.UNMUTE_THIS_TAG_NOTIFICATION";break;case"group_invite":n=i?"notifications.MUTE_THIS_GROUP_INVITE_NOTIFICATION":"notifications.UNMUTE_THIS_GROUP_INVITE_NOTIFICATION";break;case"reply_reply":n=i?"notifications.MUTE_THIS_DISCUSSION_REPLY_NOTIFICATION":"notifications.UNMUTE_THIS_DISCUSSION_REPLY_NOTIFICATION";break;case"group_blast":n=i?"notifications.MUTE_THIS_ADMIN_BLAST_NOTIFICATION":"notifications.UNMUTE_THIS_ADMIN_BLAST_NOTIFICATION";break;case"group_description":n=i?"notifications.MUTE_THIS_GROUP_DESCRIPTION_NOTIFICATION":"notifications.UNMUTE_THIS_GROUP_DESCRIPTION_NOTIFICATION";break;case"group_rules":n=i?"notifications.MUTE_THIS_GROUP_RULE_CHANGE_NOTIFICATION":"notifications.UNMUTE_THIS_GROUP_RULE_CHANGE_NOTIFICATION";break;case"photo_accepted":n=i?"notifications.MUTE_THIS_PHOTO_APPROVAL_NOTIFICATION":"notifications.UNMUTE_THIS_PHOTO_APPROVAL_NOTIFICATION";break;case"photo_declined":n=i?"notifications.MUTE_THIS_PHOTO_REJECTION_NOTIFICATION":"notifications.UNMUTE_THIS_PHOTO_REJECTION_NOTIFICATION";break;case"group_photo_request":n=i?"notifications.MUTE_THIS_PENDING_QUEUE_NOTIFICATION":"notifications.UNMUTE_THIS_PENDING_QUEUE_NOTIFICATION";break;case"group_join_request":n=i?"notifications.MUTE_THIS_JOIN_REQUEST_NOTIFICATION":"notifications.UNMUTE_THIS_JOIN_REQUEST_NOTIFICATION";break;case"gallery":n=i?"notifications.MUTE_THIS_PHOTO_ADDED_GALLERY_NOTIFICATION":"notifications.UNMUTE_THIS_PHOTO_ADDED_GALLERY_NOTIFICATION";break;case"gallery_comment":n=i?"notifications.MUTE_THIS_GALLERY_COMMENT_NOTIFICATION":"notifications.UNMUTE_THIS_GALLERY_COMMENT_NOTIFICATION";break;default:n=i?"notifications.MUTE_THIS_NOTIFICATION":"notifications.UNMUTE_THIS_NOTIFICATION"}return T.intlMessage({intlName:n})}var f,d,_,T=t.mix({langBundles:["common","notifications","relative-dates","profile","photo-card","header","group-admin","settings-notifications"],appContext:e},t.Localizable),h=new t.TemplateLibraryHelper(e,{localizeLib:T}),M=e.viewportData.getWidth()>=1081,y=M?100:50;d={photo:{extractEntityModel:function(n){return t.FlickrPromise({photoModelRegistry:e.getModelRegistry("photo-models"),personModelRegistry:e.getModelRegistry("person-models"),photoEngagementModelRegistry:e.getModelRegistry("photo-engagement-models"),photoStatsRegistry:e.getModelRegistry("photo-stats-models")}).then(function(e){var i=t.clone(n);if(i.title){var o=i.title.content||i.title._content;i.title=o}return t.APIHelper.response.parsePhotos({photos:[i],photoModelRegistry:e.photoModelRegistry,personModelRegistry:e.personModelRegistry,photoEngagementModelRegistry:e.photoEngagementModelRegistry,photoStatsModelRegistry:e.photoStatsRegistry}).shift()})}},set:{extractEntityModel:function(e){return t.Promise.resolve(e)}},gallery:{extractEntityModel:function(n){return t.FlickrPromise({personModelRegistry:e.getModelRegistry("person-models"),galleryInfoModelRegistry:e.getModelRegistry("gallery-models")}).then(function(e){var i,o,a=n.coverPhotos||[];return n.owner.nsid=n.owner.nsid||n.owner.user,i=e.personModelRegistry.addOrUpdate(t.APIHelper.response.parsePerson(n.owner)),n.owner=i,a.forEach(function(e){e.url=t.APIHelper.response.removeProtocolFromURL(e.url)}),o={id:n.galleryId,compoundId:n.id,title:n.title.content,description:n.description.content,owner:i,primary:n.primaryPhotoId,primaryPhotoSizes:t.APIHelper.response.parsePrimaryPhotoSizes(n),photoCount:n.countPhotos,videoCount:n.countVideos,viewCount:n.countViews,commentCount:n.countComments,coverPhotosData:a},e.galleryInfoModelRegistry.addOrUpdate(o)})}},person:{extractEntityModel:function(i){return t.FlickrPromise({personModelRegistry:e.getModelRegistry("person-models"),personRelationshipModelRegistry:e.getModelRegistry("person-relationship-models")}).then(function(e){var n=i;return e.personRelationshipModelRegistry.addOrUpdate(t.APIHelper.response.parseRelationship(n)),e.personModelRegistry.addOrUpdate(t.APIHelper.response.parsePerson(n))}).catch(function(t){n.error("error getting person model")})}},addedPerson:{extractEntityModel:function(t){return d.person.extractEntityModel(t)}},flickrmail:{extractEntityModel:function(n){return t.FlickrPromise({flickrMailModelRegistry:e.getModelRegistry("notification-flickrmail-models")}).then(function(t){return t.flickrMailModelRegistry.addOrUpdate(t.flickrMailModelRegistry.parseFlickrMailModel(n))})}},group:{extractEntityModel:function(n){return t.FlickrPromise({groupModelRegistry:e.getModelRegistry("group-models")}).then(function(t){return t.groupModelRegistry.addOrUpdate(t.groupModelRegistry.parseGroupModel(n.id,n.pathAlias,n))})}},discussion:{extractEntityModel:function(n){return t.FlickrPromise({groupModelRegistry:e.getModelRegistry("group-models"),discussionModelRegistry:e.getModelRegistry("notification-group-discussion-models")}).then(function(e){var i,o;return o=t.clone(n),o.id=n.group_id,o.title=n.group_name,i=e.groupModelRegistry.addOrUpdate(e.groupModelRegistry.parseGroupModel(n.group_id,n.pathAlias,o)),e.discussionModelRegistry.add(e.discussionModelRegistry.parseDiscussionModel(n.id,n.pathAlias,n,i))})}},testimonial:{extractEntityModel:function(e){return t.Promise.resolve(e)}}},_={sendMessage:function(e,n){var i;return{load:function(){return i=e.userModels[0],t.Promise.resolve()},getConfig:function(){return{actionId:"sendMessage",text:T.intlMessage({intlName:"photo-card.SEND_A_MESSAGE"}),onSelected:function(n){m(e,"sendMessage",n.analyticsLocation),t.config.win.open(t.URLHelper.generatePersonUrls(i).sendFlickrMail,"_blank")}}}}},follow:function(t,i){var o,a;return{load:function(){return o=t.userModels[0],e.getModel("person-relationship-models",t.userModels[0].getValue("nsid")).then(function(t){a=t}).catch(function(t){n.error("error getting person-relationship model")})},getConfig:function(){var e;if(!a.getValue("isIgnored"))return a.getValue("isContact")?(e="unfollowOwner",{actionId:e,text:T.intlHTMLMessage({intlName:"photo-card.UNFOLLOW_USER",username:o.getValue("displayname")}),onSelected:function(n){m(t,e,n.analyticsLocation),l(a,!1)}}):(e="followOwner",{actionId:e,text:T.intlHTMLMessage({intlName:"photo-card.FOLLOW_USER",username:o.getValue("displayname")}),onSelected:function(n){m(t,e,n.analyticsLocation),l(a,!0)}})}}},block:function(n,i){var o,a;return{load:function(){return o=n.userModels[0],e.getModel("person-relationship-models",n.userModels[0].getValue("nsid")).then(function(t){a=t})},getConfig:function(){var i;return a.getValue("isIgnored")?(i="unblockOwner",{actionId:i,text:T.intlHTMLMessage({intlName:"photo-card.UNBLOCK_USER",username:o.getValue("displayname")}),onSelected:function(t){m(n,i,t.analyticsLocation),s(a,!1)}}):(i="blockOwner",{actionId:i,text:T.intlHTMLMessage({intlName:"photo-card.BLOCK_USER",username:n.userModels[0].getValue("displayname")}),onSelected:function(r){m(n,i,r.analyticsLocation),(function(n,i){var o=new t.Views.FluidModal({appContext:e,title:T.intlHTMLMessage({intlName:"photo-card.BLOCK_USER_QUESTION",username:i}),message:"<p>"+T.intlMessage({intlName:"photo-card.BLOCK_CONFIRM_MESSAGE"})+"</p><p>"+T.intlHTMLMessage({intlName:"photo-card.BLOCK_CONFIRM_MESSAGE_NOTE"})+"</p>",actionButtonIsDangerous:!0,actionButtonLabel:T.intlMessage({intlName:"header.BLOCK"}),overlayClassList:"over-droparound-under-modal"});o.show(),o.on("actionClick",function(){s(n,!0)})})(a,o.getValue("displayname"))}})}}},joinGroup:function(n,i){var o;return{load:function(){var i=(n.activityData.photo?n.eventEntityModelsList[0].group:n.activityEntityModels.group).getValue("id");return(o=new t.GroupStatusHelper(e,{groupId:i})).load()},getConfig:function(){var t,e=o.getInfo();return e.joinStatus.canJoin?(t="joinGroup",{actionId:t,text:T.intlMessage({intlName:"photo-card.JOIN_GROUP"}),onSelected:function(e){if(o.getInfo().groupAttrs.id)return m(n,t,e.analyticsLocation),o.initiateJoinGroup()}}):e.groupAttrs.isMember?(t="leaveGroup",{actionId:t,text:T.intlMessage({intlName:"photo-card.LEAVE_GROUP"}),onSelected:function(i){if(e.groupAttrs.id)return m(n,t,i.analyticsLocation),o.initiateLeaveGroup()}}):void 0}}},muteNotification:function(i,o){return{load:function(){return t.Promise.resolve()},getConfig:function(){var o,a;return i.isMuted?(o="unmuteNotification",a=g(i.type,"unmute"),{actionId:o,text:a,wordWrap:!0,onSelected:function(a){var r={id:i.id};return m(i,o,a.analyticsLocation),e.callAPI("flickr.activity.unmuteNotification",r).then(function(e){i.isMuted=!1,t.fire("notifications:notificationMuteToggled",{activityItem:i,isMuted:!1})}).catch(function(t){n.error("Failed to unmute notificaiton: ",{err:t})})}}):(o="muteNotification",a=g(i.type,"mute"),{actionId:o,text:a,wordWrap:!0,onSelected:function(a){var r={id:i.id,mute_after:i.timestamp};return m(i,o,a.analyticsLocation),e.callAPI("flickr.activity.muteNotification",r).then(function(e){i.isMuted=!0,t.fire("notifications:notificationMuteToggled",{activityItem:i,isMuted:!0})}).catch(function(t){n.error("Failed to mute notificaiton: ",{err:t})})}})}}},muteGroup:function(i,o){return{load:function(){return t.Promise.resolve()},getConfig:function(){var a=o.groupId;return i.isMuted?{actionId:"muteGroup",text:T.intlMessage({intlName:"notifications.UNMUTE_THIS_GROUP"}),onSelected:function(o){var r={group_id:a};return m(i,"muteGroup",o.analyticsLocation),e.callAPI("flickr.activity.unmuteObject",r).then(function(e){i.isMuted=!1,t.fire("notifications:groupMuteToggled",{groupId:a,isMuted:!1})}).catch(function(t){n.error("Failed to unmute group: ",{err:t})})}}:{actionId:"muteGroup",text:T.intlMessage({intlName:"notifications.MUTE_THIS_GROUP"}),onSelected:function(o){var r={group_id:a};return m(i,"muteGroup",o.analyticsLocation),e.callAPI("flickr.activity.muteObject",r).then(function(e){i.isMuted=!0,t.fire("notifications:groupMuteToggled",{groupId:a,isMuted:!0})}).catch(function(t){n.error("Failed to mute group: ",{err:t})})}}}}}};var N={all:{additionalApiParams:{notificationGroups:"default,hermes_2020,bot_moderation"},menuItemConfig:{actionId:"all",text:T.intlMessage({intlName:"notifications.NOTIF_FILTER_ALL"})}},commentsOnYourPhotos:{additionalApiParams:{notificationGroups:"comments"},menuItemConfig:{actionId:"commentsOnYourPhotos",text:T.intlMessage({intlName:"settings-notifications.COMMENT_OWN_PHOTOS"})}},commentsAfterYourComment:{additionalApiParams:{notificationGroups:"comments_after_your_comment"},menuItemConfig:{actionId:"commentsAfterYourComment",text:T.intlMessage({intlName:"settings-notifications.COMMENT_OTHER_PHOTOS"})}},faves:{additionalApiParams:{notificationGroups:"faves"},menuItemConfig:{actionId:"faves",text:T.intlMessage({intlName:"notifications.NOTIF_FILTER_FAVES"})}},followers:{additionalApiParams:{notificationGroups:"followers"},menuItemConfig:{actionId:"followers",text:T.intlMessage({intlName:"notifications.NOTIF_FILTER_FOLLOWERS"})}},galleries:{additionalApiParams:{notificationGroups:"galleries"},menuItemConfig:{actionId:"galleries",text:T.intlMessage({intlName:"notifications.NOTIF_FILTER_GALLERIES"})}},groups:{additionalApiParams:{notificationGroups:"groups"},menuItemConfig:{actionId:"groups",text:T.intlMessage({intlName:"notifications.NOTIF_FILTER_GROUPS"})}},groupInvites:{additionalApiParams:{notificationGroups:"group_invites"},menuItemConfig:{actionId:"groupInvites",text:T.intlMessage({intlName:"settings-notifications.GROUP_INVITATIONS"})}},flickrmail:{additionalApiParams:{notificationGroups:"flickrmail"},menuItemConfig:{actionId:"flickrmail",text:T.intlMessage({intlName:"notifications.NOTIF_FILTER_FLICKRMAIL"})}},notes:{additionalApiParams:{notificationGroups:"notes"},menuItemConfig:{actionId:"notes",text:T.intlMessage({intlName:"notifications.NOTIF_FILTER_NOTES"})}},tags:{additionalApiParams:{notificationGroups:"tags"},menuItemConfig:{actionId:"tags",text:T.intlMessage({intlName:"notifications.NOTIF_FILTER_TAGS"})}},testimonials:{additionalApiParams:{notificationGroups:"testimonials"},menuItemConfig:{actionId:"testimonials",text:T.intlMessage({intlName:"notifications.NOTIF_FILTER_TESTIMONIALS"})}},mentions:{additionalApiParams:{notificationGroups:"mentions"},menuItemConfig:{actionId:"mentions",text:T.intlMessage({intlName:"notifications.NOTIF_FILTER_MENTIONS"})}},muted:{additionalApiParams:{muteFilter:"muted",notificationGroups:"default,hermes_2020,bot_moderation,groups_you_admin"},menuItemConfig:{actionId:"muted",text:T.intlMessage({intlName:"notifications.NOTIF_FILTER_MUTED"}),hasDivider:!0}},"groupsYouAdmin-all":{additionalApiParams:{notificationGroups:"groups_you_admin"},menuItemConfig:{actionId:"groupsYouAdmin-all",text:T.intlMessage({intlName:"notifications.NOTIF_FILTER_ADMIN_ALL_GROUPS"})}}};f={fave:{setupView:function(t){return e.getView("fave-notification-item-view",{activityItem:t}).then(function(t){return t.initialize()})},constructTemplateConfig:function(n){var i;if(n.activityData.photo){var o=n.activityEntityModels.photo,r=n.userModels,l=o.getValue("title").trim().length>0;return i=n.activityData.countUsers>1?2===n.activityData.countUsers?l?T.intlHTMLMessage({intlName:"notifications.NOTIF_2_PEOPLE_FAVED_1_PHOTO",personName:r[0].getValue("displayname"),personUrl:r[0].getValue("url"),person2Name:r[1].getValue("displayname"),person2Url:r[1].getValue("url"),photoTitle:o.getValue("title"),photoUrl:o.getValue("url")}):T.intlHTMLMessage({intlName:"notifications.NOTIF_2_PEOPLE_FAVED_1_UNTITLED_PHOTO",personName:r[0].getValue("displayname"),personUrl:r[0].getValue("url"),person2Name:r[1].getValue("displayname"),person2Url:r[1].getValue("url"),mediaType:o.getValue("mediaType"),photoUrl:o.getValue("url")}):l?T.intlHTMLMessage({intlName:"notifications.NOTIF_X_PEOPLE_FAVED_1_PHOTO_W_BUTTON",personName:r[0].getValue("displayname"),personUrl:r[0].getValue("url"),personCountString:t.IntlNumber.format(n.activityData.countUsers-1,e.lang,1),photoTitle:o.getValue("title"),photoUrl:o.getValue("url")}):T.intlHTMLMessage({intlName:"notifications.NOTIF_X_PEOPLE_FAVED_1_UNTITLED_PHOTO_W_BUTTON",personName:r[0].getValue("displayname"),personUrl:r[0].getValue("url"),personCountString:t.IntlNumber.format(n.activityData.countUsers-1,e.lang,1),mediaType:o.getValue("mediaType"),photoUrl:o.getValue("url")}):l?T.intlHTMLMessage({intlName:"notifications.NOTIF_1_PERSON_FAVED_1_PHOTO",personName:r[0].getValue("displayname"),personUrl:r[0].getValue("url"),photoTitle:o.getValue("title"),photoUrl:o.getValue("url")}):T.intlHTMLMessage({intlName:"notifications.NOTIF_1_PERSON_FAVED_1_UNTITLED_PHOTO",personName:r[0].getValue("displayname"),personUrl:r[0].getValue("url"),mediaType:o.getValue("mediaType"),photoUrl:o.getValue("url")}),{headline:i,timestamp:n.timestamp,avatarData:p(r[0],"person",n),photo:a(o)}}var s=n.userModels[0],u=n.eventEntityModelsList.map(function(t){return t.photo});return i=T.intlHTMLMessage({intlName:"notifications.NOTIF_1_PERSON_FAVED_X_PHOTOS",personName:s.getValue("displayname"),personUrl:s.getValue("url"),photoCountString:n.activityData.countEvents,mediaType:u[0].getValue("mediaType")}),u.length>1?{headline:i,timestamp:n.timestamp,avatarData:p(s,"person",n),photos:u.map(function(t){return a(t)}).slice(0,12),hasMultiplePhotos:!0}:{headline:i,timestamp:n.timestamp,avatarData:p(s,"person",n),photo:a(u[0]),hasMultiplePhotos:!1}},loadContextMenuConfig:function(e){var n,i=[],o=[];return e.activityData.photo&&(n=e.activityEntityModels.photo,i.push(new _.muteNotification(e,{eventType:e.type,objectId:n.getValue("id")}))),i.push(new _.sendMessage(e)),i.push(new _.follow(e)),i.push(new _.block(e)),i.forEach(function(t){o.push(t.load())}),t.Promise.all(o).then(function(){return i})},getContextMenuConfig:function(t){t.item;var e=[];return t.ctxMenuItems.forEach(function(t){var n=t.getConfig();n&&e.push(n)}),e}},comment:{setupView:function(t){return e.getView("comment-notification-item-view",{activityItem:t}).then(function(t){return t.initialize()})},constructTemplateConfig:function(n){var i;if(n.activityData.photo){var o=n.activityEntityModels.photo,r=n.userModels,l=(o.getValue("title").trim().length,u(t.flutil.unescape(t.StringHelper.stripTags(n.eventDataList[0]._content)),n));return l=l.length>0?l:"...",i=n.activityData.countUsers>1?2===n.activityData.countUsers?T.intlHTMLMessage({intlName:"notifications.NOTIF_2_PEOPLE_COMMENTED_1_PHOTO_W_COMMENT",personName:r[0].getValue("displayname"),personUrl:r[0].getValue("url"),person2Name:r[1].getValue("displayname"),person2Url:r[1].getValue("url"),commentUrl:o.getValue("url")+"/#comment"+n.eventDataList[0].commentid,commentContent:l,mediaType:o.getValue("mediaType")}):T.intlHTMLMessage({intlName:"notifications.NOTIF_X_PEOPLE_COMMENTED_1_PHOTO_W_COMMENT",personName:r[0].getValue("displayname"),personUrl:r[0].getValue("url"),personCountString:t.IntlNumber.format(n.activityData.countUsers-1,e.lang,1),commentUrl:o.getValue("url")+"/#comment"+n.eventDataList[0].commentid,commentContent:l,mediaType:o.getValue("mediaType")}):T.intlHTMLMessage({intlName:"notifications.NOTIF_1_PERSON_COMMENTED_1_PHOTO",personName:r[0].getValue("displayname"),personUrl:r[0].getValue("url"),commentUrl:o.getValue("url")+"/#comment"+n.eventDataList[0].commentid,commentContent:l}),{headline:c(i.string,n),timestamp:n.timestamp,avatarData:p(r[0],"person",n),photo:a(o)}}var s=n.userModels[0],m=n.eventEntityModelsList.map(function(t){return t.photo});return i=T.intlHTMLMessage({intlName:"notifications.NOTIF_1_PERSON_COMMENTED_X_PHOTOS",personName:s.getValue("displayname"),personUrl:s.getValue("url"),photoCountString:n.activityData.countEvents,mediaType:m[0].getValue("mediaType")}),{headline:i,timestamp:n.timestamp,avatarData:p(s,"person",n),photos:m.map(function(t){return a(t)}).slice(0,12),hasMultiplePhotos:m.length>1}},loadContextMenuConfig:function(e){var n,i=[],o=[];return e.activityData.photo&&(n=e.activityEntityModels.photo,i.push(new _.muteNotification(e,{eventType:e.type,objectId:n.getValue("id")}))),i.push(new _.sendMessage(e)),i.push(new _.follow(e)),i.push(new _.block(e)),i.forEach(function(t){o.push(t.load())}),t.Promise.all(o).then(function(){return i})},getContextMenuConfig:function(t){t.item;var e=[];return t.ctxMenuItems.forEach(function(t){var n=t.getConfig();n&&e.push(n)}),e}},reply_reply:{setupView:function(t){return e.getView("base-notification-item-view",{activityItem:t}).then(function(t){return t.initialize()})},constructTemplateConfig:function(n){var i,o=n.activityEntityModels.group,a=n.userModels;return i=n.activityData.countUsers>1?2===n.activityData.countUsers?T.intlHTMLMessage({intlName:"notifications.NOTIF_2_PEOPLE_REPLIED_TO_TOPIC",personName:a[0].getValue("displayname"),personUrl:a[0].getValue("url"),person2Name:a[1].getValue("displayname"),person2Url:a[1].getValue("url"),topicName:u(t.StringHelper.stripTags(n.activityData.topic.name),n),topicUrl:o.getValue("urlDiscussionPage")+"/"+n.activityData.topic.id+"/"+n.activityData.events[0].reply_id}):T.intlHTMLMessage({intlName:"notifications.NOTIF_X_PEOPLE_REPLIED_TO_TOPIC",personName:a[0].getValue("displayname"),personUrl:a[0].getValue("url"),personCountString:t.IntlNumber.format(n.activityData.countUsers-1,e.lang,1),topicName:u(t.StringHelper.stripTags(n.activityData.topic.name),n),topicUrl:o.getValue("urlDiscussionPage")+"/"+n.activityData.topic.id+"/"+n.activityData.events[0].reply_id}):T.intlHTMLMessage({intlName:"notifications.NOTIF_1_PERSON_REPLIED_TO_TOPIC",personName:a[0].getValue("displayname"),personUrl:a[0].getValue("url"),topicName:u(t.StringHelper.stripTags(n.activityData.topic.name),n),topicUrl:o.getValue("urlDiscussionPage")+"/"+n.activityData.topic.id,replyContent:u(t.StringHelper.stripTags(n.eventDataList[0].content),n),replyUrl:o.getValue("urlDiscussionPage")+"/"+n.activityData.topic.id+"/"+n.eventDataList[0].replyId}),{headline:c(i.string,n),timestamp:n.timestamp,subtitle:t.flutil.unescape(o.getValue("title")),subtitleUrl:o.getValue("url"),avatarData:p(a[0],"person",n)}},loadContextMenuConfig:function(e){var n=[],i=[],o=e.activityEntityModels.group;return n.push(new _.muteNotification(e,{eventType:e.type,objectId:o.getValue("id")})),n.push(new _.muteGroup(e,{groupId:o.getValue("id")})),n.push(new _.sendMessage(e)),n.push(new _.follow(e)),n.push(new _.block(e)),n.forEach(function(t){i.push(t.load())}),t.Promise.all(i).then(function(){return n})},getContextMenuConfig:function(t){t.item;var e=[];return t.ctxMenuItems.forEach(function(t){var n=t.getConfig();n&&e.push(n)}),e}},group_topic_new:{setupView:function(t){return e.getView("base-notification-item-view",{activityItem:t}).then(function(t){return t.initialize()})},constructTemplateConfig:function(n){var i,o=n.activityEntityModels.group,a=n.userModels;return i=n.activityData.countUsers>1?2===n.activityData.countUsers?T.intlHTMLMessage({intlName:"notifications.NOTIF_2_PEOPLE_CREATED_TOPICS",personName:a[0].getValue("displayname"),personUrl:a[0].getValue("url"),person2Name:a[1].getValue("displayname"),person2Url:a[1].getValue("url"),topicsUrl:o.getValue("urlDiscussionPage")}):T.intlHTMLMessage({intlName:"notifications.NOTIF_X_PEOPLE_CREATED_TOPICS",personName:a[0].getValue("displayname"),personUrl:a[0].getValue("url"),personCountString:t.IntlNumber.format(n.activityData.countUsers-1,e.lang,1),topicsUrl:o.getValue("urlDiscussionPage")}):n.activityData.countEvents>1?T.intlHTMLMessage({intlName:"notifications.NOTIF_1_PERSON_CREATED_TOPIC",personName:a[0].getValue("displayname"),personUrl:a[0].getValue("url"),topicName:u(t.StringHelper.stripTags(n.activityData.events[0].topic.name),n),topicUrl:o.getValue("urlDiscussionPage")+"/"+n.activityData.events[0].topic.id}):T.intlHTMLMessage({intlName:"notifications.NOTIF_1_PERSON_CREATED_TOPIC",personName:a[0].getValue("displayname"),personUrl:a[0].getValue("url"),topicName:u(t.StringHelper.stripTags(n.activityData.topic.name),n),topicUrl:o.getValue("urlDiscussionPage")+"/"+n.activityData.topic.id}),{headline:i,timestamp:n.timestamp,subtitle:t.flutil.unescape(o.getValue("title")),subtitleUrl:o.getValue("url"),avatarData:p(a[0],"person",n)}},loadContextMenuConfig:function(e){var n=[],i=[],o=e.activityEntityModels.group;return n.push(new _.muteGroup(e,{groupId:o.getValue("id")})),n.push(new _.sendMessage(e)),n.push(new _.follow(e)),n.push(new _.block(e)),n.forEach(function(t){i.push(t.load())}),t.Promise.all(i).then(function(){return n})},getContextMenuConfig:function(t){t.item;var e=[];return t.ctxMenuItems.forEach(function(t){var n=t.getConfig();n&&e.push(n)}),e}},contacted:{setupView:function(t){return e.getView("follow-notification-item-view",{activityItem:t}).then(function(t){return t.initialize()})},constructTemplateConfig:function(t){var e,n=t.userModels;return e=T.intlHTMLMessage({intlName:"notifications.NOTIF_1_PERSON_FOLLOWED_YOU",personName:n[0].getValue("displayname"),personUrl:n[0].getValue("url")}),{headline:e,timestamp:t.timestamp,avatarData:p(n[0],"person",t)}},loadContextMenuConfig:function(e){var n=[],i=[];e.userModels[0];return n.push(new _.sendMessage(e)),n.push(new _.follow(e)),n.push(new _.block(e)),n.forEach(function(t){i.push(t.load())}),t.Promise.all(i).then(function(){return n})},getContextMenuConfig:function(t){t.item;var e=[];return t.ctxMenuItems.forEach(function(t){var n=t.getConfig();n&&e.push(n)}),e}},group_invite:{setupView:function(t){return e.getView("group-invite-notification-item-view",{activityItem:t}).then(function(t){return t.initialize()})},constructTemplateConfig:function(n){var i,o=n.eventEntityModelsList[0].group,r=n.activityEntityModels.photo,l=n.userModels,s=!1,u=a(r);return n.activityData.countUsers>1?i=2===n.activityData.countUsers?T.intlHTMLMessage({intlName:"notifications.NOTIF_2_PEOPLE_INVITED_1_PHOTO_TO_GROUPS",personName:l[0].getValue("displayname"),personUrl:l[0].getValue("url"),person2Name:l[1].getValue("displayname"),person2Url:l[1].getValue("url")}):T.intlHTMLMessage({intlName:"notifications.NOTIF_X_PEOPLE_INVITED_1_PHOTO_TO_GROUPS",personName:l[0].getValue("displayname"),personUrl:l[0].getValue("url"),personCountString:t.IntlNumber.format(n.activityData.countUsers-1,e.lang,1)}):n.activityData.countEvents>1?i=T.intlHTMLMessage({intlName:"notifications.NOTIF_1_PERSON_INVITED_1_PHOTO_TO_GROUPS",personName:l[0].getValue("displayname"),personUrl:l[0].getValue("url")}):(i=T.intlHTMLMessage({intlName:"notifications.NOTIF_1_PERSON_INVITED_1_PHOTO_TO_GROUP",personName:l[0].getValue("displayname"),personUrl:l[0].getValue("url"),groupName:t.flutil.unescape(o.getValue("title")),groupUrl:o.getValue("urlPoolPage")}),s=!0),(n.activityData.countUsers>1||n.activityData.countEvents>1)&&(u.url=u.url+"#sub-photo-groups-section"),{headline:i,timestamp:n.timestamp,subtitle:t.flutil.unescape(o.getValue("title")),subtitleUrl:o.getValue("url"),avatarData:p(l[0],"person",n),photo:u,showButtons:s}},loadContextMenuConfig:function(e){var n=[],i=[],o=e.eventEntityModelsList[0].group;return n.push(new _.muteGroup(e,{groupId:o.getValue("id")})),n.push(new _.sendMessage(e)),n.push(new _.follow(e)),n.push(new _.block(e)),n.forEach(function(t){i.push(t.load())}),t.Promise.all(i).then(function(){return n})},getContextMenuConfig:function(t){t.item;var e=[];return t.ctxMenuItems.forEach(function(t){var n=t.getConfig();n&&e.push(n)}),e}},note:{setupView:function(t){return e.getView("base-notification-item-view",{activityItem:t}).then(function(t){return t.initialize()})},constructTemplateConfig:function(n){var i,o=n.activityEntityModels.photo,r=n.userModels;if(n.activityData.countUsers>1)i=2===n.activityData.countUsers?T.intlHTMLMessage({intlName:"notifications.NOTIF_2_PEOPLE_LEFT_NOTE_1_PHOTO",personName:r[0].getValue("displayname"),personUrl:r[0].getValue("url"),person2Name:r[1].getValue("displayname"),
person2Url:r[1].getValue("url"),photoTitle:o.getValue("title"),photoUrl:o.getValue("url")}):T.intlHTMLMessage({intlName:"notifications.NOTIF_X_PEOPLE_LEFT_NOTE_1_PHOTO",personName:r[0].getValue("displayname"),personUrl:r[0].getValue("url"),personCountString:t.IntlNumber.format(n.activityData.countUsers-1,e.lang,1),photoTitle:o.getValue("title"),photoUrl:o.getValue("url")});else if(n.activityData.countEvents>1){if(!n.activityData.photo){var l=n.eventEntityModelsList.map(function(t){return t.photo});return i=T.intlHTMLMessage({intlName:"notifications.NOTIF_1_PERSON_LEFT_NOTES_X_PHOTOS",personName:r[0].getValue("displayname"),personUrl:r[0].getValue("url"),photoCountString:t.IntlNumber.format(n.activityData.countEvents,e.lang,1)}),{headline:i,timestamp:n.timestamp,avatarData:p(r[0],"person",n),photos:l.map(function(t){return a(t)}).slice(0,12),hasMultiplePhotos:l.length>1}}i=T.intlHTMLMessage({intlName:"notifications.NOTIF_1_PERSON_LEFT_X_NOTES_1_PHOTO",personName:r[0].getValue("displayname"),personUrl:r[0].getValue("url"),photoCountString:t.IntlNumber.format(n.activityData.countEvents,e.lang,1),photoTitle:o.getValue("title"),photoUrl:o.getValue("url")})}else i=T.intlHTMLMessage({intlName:"notifications.NOTIF_1_PERSON_LEFT_NOTE_1_PHOTO",personName:r[0].getValue("displayname"),personUrl:r[0].getValue("url"),noteUrl:o.getValue("url"),noteContent:u(t.flutil.unescape(t.StringHelper.stripTags(n.eventDataList[0]._content)),n)});return{headline:c(i.string,n),timestamp:n.timestamp,avatarData:p(r[0],"person",n),photo:a(o),hasMultiplePhotos:!1}},loadContextMenuConfig:function(e){var n=[],i=[],o=e.activityEntityModels.photo;return o&&n.push(new _.muteNotification(e,{eventType:e.type,objectId:o.getValue("id")})),n.push(new _.sendMessage(e)),n.push(new _.follow(e)),n.push(new _.block(e)),n.forEach(function(t){i.push(t.load())}),t.Promise.all(i).then(function(){return n})},getContextMenuConfig:function(t){t.item;var e=[];return t.ctxMenuItems.forEach(function(t){var n=t.getConfig();n&&e.push(n)}),e}},tag:{setupView:function(t){return e.getView("base-notification-item-view",{activityItem:t}).then(function(t){return t.initialize()})},constructTemplateConfig:function(n){var i;if(n.activityData.photo){var o=n.activityEntityModels.photo,r=n.userModels,l=o.getValue("title").trim().length>0;return i=n.activityData.countUsers>1?2===n.activityData.countUsers?l?T.intlHTMLMessage({intlName:"notifications.NOTIF_2_PEOPLE_TAGGED_1_PHOTO",personName:r[0].getValue("displayname"),personUrl:r[0].getValue("url"),person2Name:r[1].getValue("displayname"),person2Url:r[1].getValue("url"),photoTitle:o.getValue("title"),photoUrl:o.getValue("url")}):T.intlHTMLMessage({intlName:"notifications.NOTIF_2_PEOPLE_TAGGED_1_UNTITLED_PHOTO",personName:r[0].getValue("displayname"),personUrl:r[0].getValue("url"),person2Name:r[1].getValue("displayname"),person2Url:r[1].getValue("url"),photoTitle:o.getValue("title"),photoUrl:o.getValue("url"),mediaType:o.getValue("mediaType")}):l?T.intlHTMLMessage({intlName:"notifications.NOTIF_X_PEOPLE_TAGGED_1_PHOTO",personName:r[0].getValue("displayname"),personUrl:r[0].getValue("url"),personCountString:t.IntlNumber.format(n.activityData.countUsers,e.lang,1),photoTitle:o.getValue("title"),photoUrl:o.getValue("url")}):T.intlHTMLMessage({intlName:"notifications.NOTIF_X_PEOPLE_TAGGED_1_UNTITLED_PHOTO",personName:r[0].getValue("displayname"),personUrl:r[0].getValue("url"),personCountString:t.IntlNumber.format(n.activityData.countUsers,e.lang,1),photoTitle:o.getValue("title"),photoUrl:o.getValue("url"),mediaType:o.getValue("mediaType")}):n.activityData.countEvents>1?l?T.intlHTMLMessage({intlName:"notifications.NOTIF_1_PERSON_MULTI_TAGGED_1_PHOTO",personName:r[0].getValue("displayname"),personUrl:r[0].getValue("url"),photoTitle:o.getValue("title"),photoUrl:o.getValue("url")}):T.intlHTMLMessage({intlName:"notifications.NOTIF_1_PERSON_MULTI_TAGGED_1_UNTITLED_PHOTO",personName:r[0].getValue("displayname"),personUrl:r[0].getValue("url"),photoUrl:o.getValue("url"),mediaType:o.getValue("mediaType")}):T.intlHTMLMessage({intlName:"notifications.NOTIF_1_PERSON_TAGGED_1_PHOTO",personName:r[0].getValue("displayname"),personUrl:r[0].getValue("url"),tagUrl:o.getValue("url"),tagName:u(t.StringHelper.stripTags(n.eventDataList[0].tagText),n)}),{headline:i,timestamp:n.timestamp,avatarData:p(r[0],"person",n),photo:a(o)}}var s=n.userModels[0],c=n.eventEntityModelsList.map(function(t){return t.photo});return i=T.intlHTMLMessage({intlName:"notifications.NOTIF_1_PERSON_TAGGED_X_PHOTOS",personName:s.getValue("displayname"),personUrl:s.getValue("url"),photoCountString:n.activityData.countEvents}),{headline:i,timestamp:n.timestamp,avatarData:p(s,"person",n),photos:c.map(function(t){return a(t)}).slice(0,12),hasMultiplePhotos:c.length>1}},loadContextMenuConfig:function(e){var n,i=[],o=[];return e.activityData.photo&&(n=e.activityEntityModels.photo,i.push(new _.muteNotification(e,{eventType:e.type,objectId:n.getValue("id")}))),i.push(new _.sendMessage(e)),i.push(new _.follow(e)),i.push(new _.block(e)),i.forEach(function(t){o.push(t.load())}),t.Promise.all(o).then(function(){return i})},getContextMenuConfig:function(t){t.item;var e=[];return t.ctxMenuItems.forEach(function(t){var n=t.getConfig();n&&e.push(n)}),e}},people:{setupView:function(t){return e.getView("base-notification-item-view",{activityItem:t}).then(function(t){return t.initialize()})},constructTemplateConfig:function(n){var i,o,r=n.userModels,l=n.activityEntityModels.photo,s=n.eventEntityModelsList[0].addedPerson;return s.getValue("id")===e.getViewer().nsid?n.activityData.countEvents>1?(o=n.eventEntityModelsList.map(function(t){return t.photo}),i=T.intlHTMLMessage({intlName:"notifications.NOTIF_1_PERSON_TAGGED_YOU_IN_X_PHOTOS",personName:r[0].getValue("displayname"),personUrl:r[0].getValue("url"),photoCountString:n.activityData.countEvents})):i=T.intlHTMLMessage({intlName:"notifications.NOTIF_1_PERSON_TAGGED_YOU_IN_PHOTO",personName:r[0].getValue("displayname"),personUrl:r[0].getValue("url"),photoUrl:l.getValue("url"),mediaType:l.getValue("mediaType")}):n.activityData.countUsers>1?i=2===n.activityData.countUsers?T.intlHTMLMessage({intlName:"notifications.NOTIF_2_PEOPLE_TAGGED_PEOPLE_IN_PHOTO",personName:r[0].getValue("displayname"),personUrl:r[0].getValue("url"),person2Name:r[1].getValue("displayname"),person2Url:r[1].getValue("url"),photoTitle:l.getValue("title"),photoUrl:l.getValue("url")}):T.intlHTMLMessage({intlName:"notifications.NOTIF_X_PEOPLE_TAGGED_PEOPLE_IN_PHOTO",personName:r[0].getValue("displayname"),personUrl:r[0].getValue("url"),photoTitle:l.getValue("title"),photoUrl:l.getValue("url"),personCountString:t.IntlNumber.format(n.activityData.countUsers-1,e.lang,1)}):n.activityData.photo?i=n.activityData.countEvents>1?T.intlHTMLMessage({intlName:"notifications.NOTIF_1_PERSON_TAGGED_PEOPLE_IN_PHOTO",personName:r[0].getValue("displayname"),personUrl:r[0].getValue("url"),photoTitle:l.getValue("title"),photoUrl:l.getValue("url")}):T.intlHTMLMessage({intlName:"notifications.NOTIF_1_PERSON_TAGGED_1_PERSON_IN_PHOTO",personName:r[0].getValue("displayname"),personUrl:r[0].getValue("url"),taggedPersonName:s.getValue("displayname"),taggedPersonUrl:s.getValue("url"),photoTitle:l.getValue("title"),photoUrl:l.getValue("url")}):(o=n.eventEntityModelsList.map(function(t){return t.photo}),i=T.intlHTMLMessage({intlName:"notifications.NOTIF_1_PERSON_TAGGED_PEOPLE_IN_X_PHOTOS",personName:r[0].getValue("displayname"),personUrl:r[0].getValue("url"),photoCountString:n.activityData.countEvents})),{headline:i,timestamp:n.timestamp,avatarData:p(r[0],"person",n),photo:l?a(l):void 0,photos:o?o.map(function(t){return a(t)}).slice(0,12):void 0,hasMultiplePhotos:!!o}},loadContextMenuConfig:function(e){var n,i=[],o=[];e.eventEntityModelsList[0].addedPerson;return e.activityData.photo&&(n=e.activityEntityModels.photo,i.push(new _.muteNotification(e,{eventType:e.type,objectId:n.getValue("id")}))),i.push(new _.sendMessage(e)),i.push(new _.follow(e)),i.push(new _.block(e)),i.forEach(function(t){o.push(t.load())}),t.Promise.all(o).then(function(){return i})},getContextMenuConfig:function(t){t.item;var e=[];return t.ctxMenuItems.forEach(function(t){var n=t.getConfig();n&&e.push(n)}),e}},testimonial:{setupView:function(t){return e.getView("testimonial-notification-item-view",{activityItem:t}).then(function(t){return t.initialize()})},constructTemplateConfig:function(n){var i,o=n.userModels;return i=T.intlHTMLMessage({intlName:"notifications.NOTIF_1_PERSON_TESTIMONIAL",personName:o[0].getValue("displayname"),personUrl:o[0].getValue("url"),testimonialUrl:"/people/"+e.getViewer().nsid+"/#testimonial"+n.eventDataList[0].testimonial.id,testimonialContent:u(t.StringHelper.stripTags(n.eventDataList[0].testimonial.body),n)}),{headline:c(i.string,n),timestamp:n.timestamp,avatarData:p(o[0],"person",n),isApproved:"1"===n.eventDataList[0].testimonial.approved}},loadContextMenuConfig:function(e){var n=[],i=[];e.userModels[0];return n.push(new _.sendMessage(e)),n.push(new _.follow(e)),n.push(new _.block(e)),n.forEach(function(t){i.push(t.load())}),t.Promise.all(i).then(function(){return n})},getContextMenuConfig:function(t){t.item;var e=[];return t.ctxMenuItems.forEach(function(t){var n=t.getConfig();n&&e.push(n)}),e}},group_user_invite:{setupView:function(t){return e.getView("group-user-invite-notification-item-view",{activityItem:t}).then(function(t){return t.initialize()})},constructTemplateConfig:function(e){var n,i=e.activityEntityModels.group,o=e.userModels,a=e.activityData.group;return n=T.intlHTMLMessage({intlName:"notifications.NOTIF_1_PERSON_INVITED_YOU_TO_GROUP",personName:o[0].getValue("displayname"),personUrl:o[0].getValue("url"),groupName:t.flutil.unescape(i.getValue("title")),groupUrl:i.getValue("url")}),{headline:n,timestamp:e.timestamp,subtitle:t.flutil.unescape(i.getValue("title")),subtitleUrl:i.getValue("url"),avatarData:p(o[0],"person",e),showButtons:a.isInvited,isMember:a.isMember}},loadContextMenuConfig:function(e){var n=[],i=[],o=e.activityEntityModels.group;return n.push(new _.muteGroup(e,{groupId:o.getValue("id")})),n.push(new _.sendMessage(e)),n.push(new _.follow(e)),n.push(new _.block(e)),n.forEach(function(t){i.push(t.load())}),t.Promise.all(i).then(function(){return n})},getContextMenuConfig:function(t){t.item;var e=[];return t.ctxMenuItems.forEach(function(t){var n=t.getConfig();n&&e.push(n)}),e}},flickrmail:{setupView:function(t){return e.getView("base-notification-item-view",{activityItem:t}).then(function(t){return t.initialize()})},constructTemplateConfig:function(e){var n,i=e.userModels;return n=T.intlHTMLMessage({intlName:"notifications.NOTIF_1_PERSON_FLICKRMAIL",personName:i[0].getValue("displayname"),personUrl:i[0].getValue("url"),flickrmailUrl:"/mail/"+e.eventDataList[0].id,flickrmailContent:u(t.StringHelper.stripTags(e.eventDataList[0].subject),e)}),{headline:c(n.string,e),timestamp:e.timestamp,avatarData:p(i[0],"person",e)}},loadContextMenuConfig:function(e){var n=[],i=[];e.userModels[0];return n.push(new _.sendMessage(e)),n.push(new _.follow(e)),n.push(new _.block(e)),n.forEach(function(t){i.push(t.load())}),t.Promise.all(i).then(function(){return n})},getContextMenuConfig:function(t){t.item;var e=[];return t.ctxMenuItems.forEach(function(t){var n=t.getConfig();n&&e.push(n)}),e}},photo_comment_mention:{setupView:function(t){return e.getView("comment-notification-item-view",{activityItem:t}).then(function(t){return t.initialize()})},constructTemplateConfig:function(n){var i,o=n.activityEntityModels.photo,r=n.userModels,l=u(t.flutil.unescape(t.StringHelper.stripTags(n.eventDataList[0]._content)),n);return l=l.length>0?l:"...",i=n.activityData.countUsers>1?2===n.activityData.countUsers?T.intlHTMLMessage({intlName:"notifications.NOTIF_2_PEOPLE_COMMENT_MENTIONED_YOU_1_PHOTO_W_COMMENT",personName:r[0].getValue("displayname"),personUrl:r[0].getValue("url"),person2Name:r[1].getValue("displayname"),person2Url:r[1].getValue("url"),personCountString:t.IntlNumber.format(n.activityData.countUsers-1,e.lang,1),commentUrl:o.getValue("url")+"/#comment"+n.eventDataList[0].commentid,commentContent:l}):T.intlHTMLMessage({intlName:"notifications.NOTIF_X_PEOPLE_COMMENT_MENTIONED_YOU_1_PHOTO_W_COMMENT",personName:r[0].getValue("displayname"),personUrl:r[0].getValue("url"),personCountString:t.IntlNumber.format(n.activityData.countUsers-1,e.lang,1),commentUrl:o.getValue("url")+"/#comment"+n.eventDataList[0].commentid,commentContent:l}):T.intlHTMLMessage({intlName:"notifications.NOTIF_1_PERSON_COMMENT_MENTIONED_YOU_1_PHOTO",personName:r[0].getValue("displayname"),personUrl:r[0].getValue("url"),commentUrl:o.getValue("url")+"/#comment"+n.eventDataList[0].commentid,commentContent:l}),{headline:c(i.string,n),timestamp:n.timestamp,avatarData:p(r[0],"person",n),photo:a(o)}},loadContextMenuConfig:function(e){var n=[],i=[],o=e.activityEntityModels.photo;return n.push(new _.muteNotification(e,{eventType:e.type,objectId:o.getValue("id")})),n.push(new _.sendMessage(e)),n.push(new _.follow(e)),n.push(new _.block(e)),n.forEach(function(t){i.push(t.load())}),t.Promise.all(i).then(function(){return n})},getContextMenuConfig:function(t){t.item;var e=[];return t.ctxMenuItems.forEach(function(t){var n=t.getConfig();n&&e.push(n)}),e}},gallery:{setupView:function(t){return e.getView("base-notification-item-view",{activityItem:t}).then(function(t){return t.initialize()})},constructTemplateConfig:function(n){var i,o=n.userModels,r=n.activityEntityModels.photo,l=n.eventEntityModelsList[0].gallery;return i=n.activityData.countUsers>1?2===n.activityData.countUsers?T.intlHTMLMessage({intlName:"notifications.NOTIF_2_PEOPLE_ADDED_1_PHOTO_TO_GALLERIES",personName:o[0].getValue("displayname"),personUrl:o[0].getValue("url"),person2Name:o[1].getValue("displayname"),person2Url:o[1].getValue("url")}):T.intlHTMLMessage({intlName:"notifications.NOTIF_X_PEOPLE_ADDED_1_PHOTO_TO_GALLERIES",personName:o[0].getValue("displayname"),personUrl:o[0].getValue("url"),personCountString:t.IntlNumber.format(n.activityData.countUsers-1,e.lang,1)}):T.intlHTMLMessage({intlName:"notifications.NOTIF_1_PERSON_ADDED_1_PHOTO_TO_GALLERY",personName:o[0].getValue("displayname"),personUrl:o[0].getValue("url"),galleryUrl:l.getValue("url"),galleryTitle:u(t.StringHelper.stripTags(l.getValue("title")),n)}),{headline:i,timestamp:n.timestamp,avatarData:p(o[0],"person",n),photo:a(r)}},loadContextMenuConfig:function(e){var n=[],i=[],o=e.activityEntityModels.photo;return n.push(new _.muteNotification(e,{eventType:e.type,objectId:o.getValue("id")})),n.push(new _.sendMessage(e)),n.push(new _.follow(e)),n.push(new _.block(e)),n.forEach(function(t){i.push(t.load())}),t.Promise.all(i).then(function(){return n})},getContextMenuConfig:function(t){t.item;var e=[];return t.ctxMenuItems.forEach(function(t){var n=t.getConfig();n&&e.push(n)}),e}},gallery_comment:{setupView:function(t){return e.getView("gallery-comment-notification-item-view",{activityItem:t}).then(function(t){return t.initialize()})},constructTemplateConfig:function(n){var i,o=n.userModels,a=n.activityEntityModels.gallery,r=a.getValue("coverPhotosData"),l=r.length>0?r[0]:void 0,s=u(t.flutil.unescape(t.StringHelper.stripTags(n.eventDataList[0]._content)),n);return s=s.length>0?s:"...",i=n.activityData.countUsers>1?2===n.activityData.countUsers?T.intlHTMLMessage({intlName:"notifications.NOTIF_2_PEOPLE_COMMENTED_ON_1_GALLERY_W_COMMENT",personName:o[0].getValue("displayname"),personUrl:o[0].getValue("url"),person2Name:o[1].getValue("displayname"),person2Url:o[1].getValue("url"),personCountString:t.IntlNumber.format(n.activityData.countUsers,e.lang,1),galleryUrl:n.activityData.gallery.url,galleryTitle:u(t.StringHelper.stripTags(n.activityData.gallery.title.content),n),commentUrl:a.getValue("url")+"/#comment"+n.eventDataList[0].commentid,commentContent:s}):T.intlHTMLMessage({intlName:"notifications.NOTIF_X_PEOPLE_COMMENTED_ON_1_GALLERY_W_COMMENT",personName:o[0].getValue("displayname"),personUrl:o[0].getValue("url"),personCountString:t.IntlNumber.format(n.activityData.countUsers,e.lang,1),galleryUrl:n.activityData.gallery.url,galleryTitle:u(t.StringHelper.stripTags(n.activityData.gallery.title.content),n),commentUrl:a.getValue("url")+"/#comment"+n.eventDataList[0].commentid,commentContent:s}):T.intlHTMLMessage({intlName:"notifications.NOTIF_1_PERSON_COMMENTED_ON_1_GALLERY",personName:o[0].getValue("displayname"),personUrl:o[0].getValue("url"),galleryUrl:a.getValue("url"),galleryTitle:u(t.StringHelper.stripTags(a.getValue("title")),n),commentUrl:a.getValue("url")+"/#comment"+n.eventDataList[0].commentid,commentContent:s}),{headline:c(i.string,n),timestamp:n.timestamp,avatarData:p(o[0],"person",n),photo:{url:a.getValue("url"),displayUrl:l?l.url:void 0,counts:{faves:0,comments:a.getValue("commentCount")}}}},loadContextMenuConfig:function(e){var n=[],i=[],o=e.activityEntityModels.gallery;return n.push(new _.muteNotification(e,{eventType:e.type,objectId:o.getValue("id")})),n.push(new _.sendMessage(e)),n.push(new _.follow(e)),n.push(new _.block(e)),n.forEach(function(t){i.push(t.load())}),t.Promise.all(i).then(function(){return n})},getContextMenuConfig:function(t){t.item;var e=[];return t.ctxMenuItems.forEach(function(t){var n=t.getConfig();n&&e.push(n)}),e}},share:{setupView:function(t){return e.getView("base-notification-item-view",{activityItem:t}).then(function(t){return t.initialize()})},constructTemplateConfig:function(t){var e,n=t.activityEntityModels.photo,i=t.userModels,o=t.activityData.events[0].shareUrl;e=n.getValue("title").trim().length>0?T.intlHTMLMessage({intlName:"notifications.NOTIF_1_PERSON_SHARED_1_PHOTO",personName:i[0].getValue("displayname"),personUrl:i[0].getValue("url"),photoTitle:n.getValue("title"),photoUrl:o||n.getValue("url")}):T.intlHTMLMessage({intlName:"notifications.NOTIF_1_PERSON_SHARED_1_UNTITLED_PHOTO",personName:i[0].getValue("displayname"),personUrl:i[0].getValue("url"),photoUrl:o||n.getValue("url"),mediaType:n.getValue("mediaType")});var r=a(n);return r.url=o,{headline:e,timestamp:t.timestamp,avatarData:p(i[0],"person",t),photo:r}},loadContextMenuConfig:function(e){var n=[],i=[];e.activityEntityModels.photo;return n.push(new _.sendMessage(e)),n.push(new _.follow(e)),n.push(new _.block(e)),n.forEach(function(t){i.push(t.load())}),t.Promise.all(i).then(function(){return n})},getContextMenuConfig:function(t){t.item;var e=[];return t.ctxMenuItems.forEach(function(t){var n=t.getConfig();n&&e.push(n)}),e}},photo_accepted:{setupView:function(t){return e.getView("base-notification-item-view",{activityItem:t}).then(function(t){return t.initialize()})},constructTemplateConfig:function(e){var n,i;if(e.activityData.photo){i=e.eventEntityModelsList[0].group;var o=e.activityEntityModels.photo;return n=T.intlHTMLMessage({intlName:"notifications.NOTIF_GROUP_ADMIN_APPROVED_1_PHOTO",groupName:t.flutil.unescape(i.getValue("title")),groupUrl:i.getValue("url")}),{headline:n,timestamp:e.timestamp,subtitle:t.flutil.unescape(i.getValue("title")),subtitleUrl:i.getValue("url"),avatarData:p(i,"group",e),photo:a(o)}}i=e.activityEntityModels.group;var r=e.eventEntityModelsList.map(function(t){return t.photo});return n=T.intlHTMLMessage({intlName:"notifications.NOTIF_GROUP_ADMIN_APPROVED_X_PHOTOS",groupName:t.flutil.unescape(i.getValue("title")),groupUrl:i.getValue("url"),photoCountString:e.activityData.countEvents}),{headline:n,timestamp:e.timestamp,subtitle:t.flutil.unescape(i.getValue("title")),subtitleUrl:i.getValue("url"),avatarData:p(i,"group",e),photos:r.map(function(t){return a(t)}).slice(0,12),hasMultiplePhotos:!0}},loadContextMenuConfig:function(e){var n,i=[],o=[];return e.activityData.photo?(n=e.activityEntityModels.photo,i.push(new _.muteNotification(e,{eventType:e.type,objectId:n.getValue("id")})),i.push(new _.muteGroup(e,{groupId:e.eventEntityModelsList[0].group.getValue("id")}))):i.push(new _.muteGroup(e,{groupId:e.activityEntityModels.group.getValue("id")})),i.push(new _.joinGroup(e)),i.forEach(function(t){o.push(t.load())}),t.Promise.all(o).then(function(){return i})},getContextMenuConfig:function(t){t.item;var e=[];return t.ctxMenuItems.forEach(function(t){var n=t.getConfig();n&&e.push(n)}),e}},photo_declined:{setupView:function(t){return e.getView("base-notification-item-view",{activityItem:t}).then(function(t){return t.initialize()})},constructTemplateConfig:function(e){var n,i;if(e.activityData.photo){i=e.eventEntityModelsList[0].group;var o=e.activityEntityModels.photo;return n=T.intlHTMLMessage({intlName:"notifications.NOTIF_GROUP_ADMIN_REJECTED_1_PHOTO",groupName:t.flutil.unescape(i.getValue("title")),groupUrl:i.getValue("url")}),{headline:n,timestamp:e.timestamp,subtitle:t.flutil.unescape(i.getValue("title")),subtitleUrl:i.getValue("url"),avatarData:p(i,"group",e),photo:a(o)}}i=e.activityEntityModels.group;var r=e.eventEntityModelsList.map(function(t){return t.photo});return n=T.intlHTMLMessage({intlName:"notifications.NOTIF_GROUP_ADMIN_REJECTED_X_PHOTOS",groupName:t.flutil.unescape(i.getValue("title")),groupUrl:i.getValue("url"),photoCountString:e.activityData.countEvents}),{headline:n,timestamp:e.timestamp,subtitle:t.flutil.unescape(i.getValue("title")),subtitleUrl:i.getValue("url"),avatarData:p(i,"group",e),photos:r.map(function(t){return a(t)}).slice(0,12),hasMultiplePhotos:!0}},loadContextMenuConfig:function(e){var n,i=[],o=[];return e.activityData.photo?(n=e.activityEntityModels.photo,i.push(new _.muteNotification(e,{eventType:e.type,objectId:n.getValue("id")})),i.push(new _.muteGroup(e,{groupId:e.eventEntityModelsList[0].group.getValue("id")}))):i.push(new _.muteGroup(e,{groupId:e.activityEntityModels.group.getValue("id")})),i.push(new _.joinGroup(e)),i.forEach(function(t){o.push(t.load())}),t.Promise.all(o).then(function(){return i})},getContextMenuConfig:function(t){t.item;var e=[];return t.ctxMenuItems.forEach(function(t){var n=t.getConfig();n&&e.push(n)}),e}},photo_mention:{},group_blast:{setupView:function(t){return e.getView("base-notification-item-view",{activityItem:t}).then(function(t){return t.initialize()})},constructTemplateConfig:function(e){var n,i=e.userModels,o=e.eventEntityModelsList[0].group;return n=T.intlHTMLMessage({intlName:"notifications.NOTIF_1_PERSON_UPDATED_GROUP_BLAST",personName:i[0].getValue("displayname"),personUrl:i[0].getValue("url"),groupName:t.flutil.unescape(o.getValue("title")),groupUrl:o.getValue("url"),blastUrl:o.getValue("url"),blastContent:u(t.StringHelper.stripTags(e.eventDataList[0].group.blast),e)}),{headline:c(n.string,e),timestamp:e.timestamp,subtitle:t.flutil.unescape(o.getValue("title")),subtitleUrl:o.getValue("url"),avatarData:p(i[0],"person",e)}},loadContextMenuConfig:function(e){var n=[],i=[],o=e.eventEntityModelsList[0].group;return n.push(new _.muteNotification(e,{eventType:e.type,objectId:o.getValue("id")})),n.push(new _.muteGroup(e,{groupId:o.getValue("id")})),n.push(new _.sendMessage(e)),n.push(new _.follow(e)),n.push(new _.block(e)),n.forEach(function(t){i.push(t.load())}),t.Promise.all(i).then(function(){return n})},getContextMenuConfig:function(t){t.item;var e=[];return t.ctxMenuItems.forEach(function(t){var n=t.getConfig();n&&e.push(n)}),e}},group_rules:{setupView:function(t){return e.getView("base-notification-item-view",{activityItem:t}).then(function(t){return t.initialize()})},constructTemplateConfig:function(e){var n,i=e.userModels,o=e.eventEntityModelsList[0].group;return n=T.intlHTMLMessage({intlName:"notifications.NOTIF_1_PERSON_UPDATED_GROUP_RULES",personName:i[0].getValue("displayname"),personUrl:i[0].getValue("url"),groupName:t.flutil.unescape(o.getValue("title")),groupUrl:o.getValue("url"),rulesUrl:o.getValue("url")+"#group-rules",rulesContent:u(t.StringHelper.stripTags(e.eventDataList[0].group.rules),e)}),{headline:c(n.string,e),timestamp:e.timestamp,subtitle:t.flutil.unescape(o.getValue("title")),subtitleUrl:o.getValue("url"),avatarData:p(i[0],"person",e)}},loadContextMenuConfig:function(e){var n=[],i=[],o=e.eventEntityModelsList[0].group;return n.push(new _.muteNotification(e,{eventType:e.type,objectId:o.getValue("id")})),n.push(new _.muteGroup(e,{groupId:o.getValue("id")})),n.push(new _.sendMessage(e)),n.push(new _.follow(e)),n.push(new _.block(e)),n.forEach(function(t){i.push(t.load())}),t.Promise.all(i).then(function(){return n})},getContextMenuConfig:function(t){t.item;var e=[];return t.ctxMenuItems.forEach(function(t){var n=t.getConfig();n&&e.push(n)}),e}},group_description:{setupView:function(t){return e.getView("base-notification-item-view",{activityItem:t}).then(function(t){return t.initialize()})},constructTemplateConfig:function(e){var n,i=e.userModels,o=e.eventEntityModelsList[0].group,a=null!==e.eventDataList[0].group.secureDescription?t.StringHelper.stripTags(e.eventDataList[0].group.secureDescription):t.StringHelper.stripTags(e.eventDataList[0].group.description);return n=T.intlHTMLMessage({intlName:"notifications.NOTIF_1_PERSON_UPDATED_GROUP_DESCRIPTION",personName:i[0].getValue("displayname"),personUrl:i[0].getValue("url"),groupName:t.flutil.unescape(o.getValue("title")),groupUrl:o.getValue("url"),descriptionUrl:o.getValue("url")+"#group-description",descriptionContent:u(a,e)}),{headline:c(n.string,e),timestamp:e.timestamp,subtitle:t.flutil.unescape(o.getValue("title")),subtitleUrl:o.getValue("url"),avatarData:p(i[0],"person",e)}},loadContextMenuConfig:function(e){var n=[],i=[],o=e.eventEntityModelsList[0].group;return n.push(new _.muteNotification(e,{eventType:e.type,objectId:o.getValue("id")})),n.push(new _.muteGroup(e,{groupId:o.getValue("id")})),n.push(new _.sendMessage(e)),n.push(new _.follow(e)),n.push(new _.block(e)),n.forEach(function(t){i.push(t.load())}),t.Promise.all(i).then(function(){return n})},getContextMenuConfig:function(t){t.item;var e=[];return t.ctxMenuItems.forEach(function(t){var n=t.getConfig();n&&e.push(n)}),e}},upload:{},photo_bot_moderated:{extractEntitiesFromResponse:function(t){return r(t)},setupView:function(t){return e.getView("base-notification-item-view",{activityItem:t}).then(function(t){return t.initialize()})},constructTemplateConfig:function(t){var e,n=a(t.activityEntityModels.photo),i=t.eventDataList[0].to_safety_level;return n.url&&(n.url+="?isModerated=true"),e=1===i?T.intlHTMLMessage({intlName:"notifications.NOTIF_PHOTO_MODERATED_MODERATE",learnUrl:"https://flickrhelp.com/hc/en-us/articles/4405279492500-The-Flickr-Moderation-Bot-has-changed-the-safety-level-of-my-photo"}):T.intlHTMLMessage({intlName:"notifications.NOTIF_PHOTO_MODERATED_RESTRICTED",learnUrl:"https://flickrhelp.com/hc/en-us/articles/4405279492500-The-Flickr-Moderation-Bot-has-changed-the-safety-level-of-my-photo"}),{headline:e,timestamp:t.timestamp,learnUrl:"https://flickrhelp.com/hc/en-us/articles/4405279492500-The-Flickr-Moderation-Bot-has-changed-the-safety-level-of-my-photo",photo:n}}},group_join_request:{setupView:function(t){return e.getView("group-join-request-notification-item-view",{activityItem:t}).then(function(t){return t.initialize()})},constructTemplateConfig:function(n){var i,o=n.activityEntityModels.group,a=n.userModels;return i=n.activityData.countUsers>1?T.intlHTMLMessage({intlName:"notifications.NOTIF_X_PEOPLE_REQUESTED_TO_JOIN",personName:a[0].getValue("displayname"),personUrl:a[0].getValue("url"),personCountString:t.IntlNumber.format(n.activityData.countUsers-1,e.lang,1),memberQueueUrl:o.getValue("urlPendingMembersPage")}):T.intlHTMLMessage({intlName:"notifications.NOTIF_1_PERSON_REQUESTED_TO_JOIN",personName:a[0].getValue("displayname"),personUrl:a[0].getValue("url"),groupName:t.flutil.unescape(o.getValue("title")),groupUrl:o.getValue("url")}),{headline:i,timestamp:n.timestamp,subtitle:t.flutil.unescape(o.getValue("title")),subtitleUrl:o.getValue("url"),avatarData:p(a[0],"person",n),showButtons:n.activityData.countUsers<=1}},loadContextMenuConfig:function(e){var n=[],i=[],o=e.activityEntityModels.group;return n.push(new _.muteNotification(e,{eventType:e.type,objectId:o.getValue("id")})),n.push(new _.muteGroup(e,{groupId:o.getValue("id")})),n.push(new _.sendMessage(e)),n.push(new _.follow(e)),n.push(new _.block(e)),n.forEach(function(t){i.push(t.load())}),t.Promise.all(i).then(function(){return n})},getContextMenuConfig:function(t){t.item;var e=[];return t.ctxMenuItems.forEach(function(t){var n=t.getConfig();n&&e.push(n)}),e}},group_photo_request:{setupView:function(t){return e.getView("group-photo-request-notification-item-view",{activityItem:t}).then(function(t){return t.initialize()})},constructTemplateConfig:function(n){var i,o,r=n.eventEntityModelsList.map(function(t){return t.photo})[0],l=n.activityEntityModels.group,s=n.userModels;return n.activityData.countUsers>1?i=T.intlHTMLMessage({intlName:"notifications.NOTIF_X_PEOPLE_ADDED_PHOTOS_TO_QUEUE",personName:s[0].getValue("displayname"),personUrl:s[0].getValue("url"),personCountString:t.IntlNumber.format(n.activityData.countUsers-1,e.lang,1),pendingQueueUrl:l.getValue("urlPendingPhotosPage")}):n.activityData.countEvents>1?i=T.intlHTMLMessage({intlName:"notifications.NOTIF_1_PERSON_ADDED_PHOTOS_TO_QUEUE",personName:s[0].getValue("displayname"),personUrl:s[0].getValue("url"),pendingQueueUrl:l.getValue("urlPendingPhotosPage")}):(i=T.intlHTMLMessage({intlName:"notifications.NOTIF_1_PERSON_ADDED_1_PHOTO_TO_QUEUE",personName:s[0].getValue("displayname"),personUrl:s[0].getValue("url"),pendingQueueUrl:l.getValue("urlPendingPhotosPage")}),o=a(r)),{headline:i,timestamp:n.timestamp,subtitle:t.flutil.unescape(l.getValue("title")),subtitleUrl:l.getValue("url"),avatarData:p(s[0],"person",n),photo:o,showButtons:n.activityData.countUsers<=1&&n.activityData.countEvents<=1}},loadContextMenuConfig:function(e){var i=[],o=[],a=e.activityEntityModels.group;return i.push(new _.muteNotification(e,{eventType:e.type,objectId:a.id})),i.push(new _.muteGroup(e,{groupId:a.getValue("id")})),i.push(new _.sendMessage(e)),i.push(new _.follow(e)),i.push(new _.block(e)),i.forEach(function(t){o.push(t.load())}),t.Promise.all(o).then(function(){return i}).catch(function(t){
n.error("error loading context menu config")})},getContextMenuConfig:function(t){t.item;var e=[];return t.ctxMenuItems.forEach(function(t){var n=t.getConfig();n&&e.push(n)}),e}},group_cover_photo:{setupView:function(t){return e.getView("base-notification-item-view",{activityItem:t}).then(function(t){return t.initialize()})},constructTemplateConfig:function(e){var n,i=e.eventEntityModelsList[0].group,o=e.activityEntityModels.photo,r=e.userModels;return n=T.intlHTMLMessage({intlName:"notifications.NOTIF_1_PERSON_SET_GROUP_COVER_PHOTO",personName:r[0].getValue("displayname"),personUrl:r[0].getValue("url"),groupName:t.flutil.unescape(i.getValue("title")),groupUrl:i.getValue("url")}),{headline:n,timestamp:e.timestamp,subtitle:t.flutil.unescape(i.getValue("title")),subtitleUrl:i.getValue("url"),avatarData:p(r[0],"person",e),photo:a(o)}},loadContextMenuConfig:function(e){var n=[],i=[],o=e.eventEntityModelsList[0].group;return n.push(new _.muteNotification(e,{eventType:e.type,objectId:o.getValue("id")})),n.push(new _.muteGroup(e,{groupId:o.getValue("id")})),n.push(new _.sendMessage(e)),n.push(new _.follow(e)),n.push(new _.block(e)),n.forEach(function(t){i.push(t.load())}),t.Promise.all(i).then(function(){return n})},getContextMenuConfig:function(t){t.item;var e=[];return t.ctxMenuItems.forEach(function(t){var n=t.getConfig();n&&e.push(n)}),e}},comment_after_your_comment:{setupView:function(t){return e.getView("comment-notification-item-view",{activityItem:t}).then(function(t){return t.initialize()})},constructTemplateConfig:function(n){var i,o=n.activityEntityModels.photo,r=n.userModels,l=u(t.flutil.unescape(t.StringHelper.stripTags(n.eventDataList[0]._content)),n);return l=l.length>0?l:"...",i=n.activityData.countUsers>1?2===n.activityData.countUsers?T.intlHTMLMessage({intlName:"notifications.NOTIF_2_PEOPLE_COMMENTED_AFTER_1_PHOTO_W_COMMENT",personName:r[0].getValue("displayname"),personUrl:r[0].getValue("url"),person2Name:r[1].getValue("displayname"),person2Url:r[1].getValue("url"),commentUrl:o.getValue("url")+"/#comment"+n.eventDataList[0].commentid,commentContent:l}):T.intlHTMLMessage({intlName:"notifications.NOTIF_X_PEOPLE_COMMENTED_AFTER_1_PHOTO_W_COMMENT",personName:r[0].getValue("displayname"),personUrl:r[0].getValue("url"),personCountString:t.IntlNumber.format(n.activityData.countUsers-1,e.lang,1),commentUrl:o.getValue("url")+"/#comment"+n.eventDataList[0].commentid,commentContent:l}):T.intlHTMLMessage({intlName:"notifications.NOTIF_1_PERSON_COMMENTED_AFTER_1_PHOTO",personName:r[0].getValue("displayname"),personUrl:r[0].getValue("url"),commentUrl:o.getValue("url")+"/#comment"+n.eventDataList[0].commentid,commentContent:l}),{headline:c(i.string,n),timestamp:n.timestamp,avatarData:p(r[0],"person",n),photo:a(o)}},loadContextMenuConfig:function(e){var n,i=[],o=[];return n=e.activityEntityModels.photo,i.push(new _.muteNotification(e,{eventType:e.type,objectId:n.getValue("id")})),i.push(new _.sendMessage(e)),i.push(new _.follow(e)),i.push(new _.block(e)),i.forEach(function(t){o.push(t.load())}),t.Promise.all(o).then(function(){return i})},getContextMenuConfig:function(t){t.item;var e=[];return t.ctxMenuItems.forEach(function(t){var n=t.getConfig();n&&e.push(n)}),e}},group_join_request_accepted:{setupView:function(t){return e.getView("base-notification-item-view",{activityItem:t}).then(function(t){return t.initialize()})},constructTemplateConfig:function(e){var n,i=e.activityEntityModels.group;e.userModels;return n=T.intlHTMLMessage({intlName:"notifications.NOTIF_GROUP_ADMIN_JOIN_REQUEST_ACCEPTED",groupName:t.flutil.unescape(i.getValue("title")),groupUrl:i.getValue("url")}),{headline:n,timestamp:e.timestamp,subtitle:t.flutil.unescape(i.getValue("title")),subtitleUrl:i.getValue("url"),avatarData:p(i,"group",e)}},loadContextMenuConfig:function(e){var n=[],i=[],o=e.activityEntityModels.group;return n.push(new _.muteNotification(e,{eventType:e.type,objectId:o.getValue("id")})),n.push(new _.muteGroup(e,{groupId:o.getValue("id")})),n.push(new _.joinGroup(e)),n.forEach(function(t){i.push(t.load())}),t.Promise.all(i).then(function(){return n})},getContextMenuConfig:function(t){t.item;var e=[];return t.ctxMenuItems.forEach(function(t){var n=t.getConfig();n&&e.push(n)}),e}}};var v={extractEntitiesFromResponse:function(e){try{return r(e)}catch(e){return t.Promise.resolve({})}},setupView:function(t){var e=t.type;try{return f[e].setupView(t)}catch(t){return}},getTemplateHtml:function(t){var e,n=t.type;try{return e=f[n].constructTemplateConfig(t),h.getTemplate(i[n])(e)}catch(t){return""}},loadContextMenuConfig:function(e){var n=e.type;try{return f[n].loadContextMenuConfig(e)}catch(e){return t.Promise.reject(e)}},getContextMenuConfig:function(e){try{return f[e.item.type].getContextMenuConfig(e)}catch(e){return t.Promise.reject(e)}},getFilterConfig:function(t){return N[t]},convertNotificationModel:function(t){return{id:t.getValue("id"),isSeen:t.getValue("isSeen"),isMuted:t.getValue("isMuted"),type:t.getValue("type"),timestamp:t.getValue("timestamp"),model:t,activityData:t.getValue("activityData"),eventDataList:t.getValue("eventDataList"),userModels:t.getValue("userModels"),activityEntityModels:t.getValue("activityEntityModels"),eventEntityModelsList:t.getValue("eventEntityModelsList")}}};return t.augment(v,t.EventTarget),v}},"@VERSION@",{requires:["event-custom","template-lib-helper","api-helper","intl-number","string-helper","group-status-helper","base-notification-item-view","follow-notification-item-view","testimonial-notification-item-view","group-invite-notification-item-view","comment-notification-item-view","fave-notification-item-view","gallery-comment-notification-item-view","hermes-template-notification-core","hermes-template-notif-item-fave","hermes-template-notif-item-comment","hermes-template-notif-item-reply-reply","hermes-template-notif-item-group-topic-new","hermes-template-notif-item-contacted","hermes-template-notif-item-group-invite","hermes-template-notif-item-note","hermes-template-notif-item-tag","hermes-template-notif-item-people","hermes-template-notif-item-testimonial","hermes-template-notif-item-group-user-invite","hermes-template-notif-item-flickrmail","hermes-template-notif-item-photo-comment-mention","hermes-template-notif-item-gallery","hermes-template-notif-item-gallery-comment","hermes-template-notif-item-share","hermes-template-notif-item-photo-accepted","hermes-template-notif-item-photo-declined","hermes-template-notif-item-photo-mention","hermes-template-notif-item-group-blast","hermes-template-notif-item-group-rules","hermes-template-notif-item-group-description","hermes-template-notif-item-upload","hermes-template-notif-item-moderated","hermes-template-notif-item-group-join-request","hermes-template-notif-item-group-photo-request","hermes-template-notif-item-comment-after-your-comment","hermes-template-notif-item-group-cover-photo","hermes-template-notif-item-group-join-request-accepted"],langBundles:["common","relative-dates","notifications","profile","group-admin","photo-card","header","settings-notifications"]});YUI.add("hermes-lang-group-admin",function(e,o){e.Intl.add("hermes/group-admin","en-US",{RULES_AND_MODERATION:["Rules & Moderation"],READ_UP_ON_GROUPS:['Read up on some ideas about <a class="help-link" href="',"${helpUrl}",'">how to run a happy group</a> on Flickr.'],MODERATE_GROUP_HEADING:["Moderate your group"],MODERATE_GROUP_DESCRIPTION:["Control the flow of submissions into the group pool, and whether or not to allow discussions."],MANAGE_MEMBERS_HEADING:["Manage your members"],MANAGE_MEMBERS_DESCRIPTION:["From here you can promote, temporarily remove or ban your members."],GROUP_RULES_HEADING:["Group rules"],GROUP_RULES_DESCRIPTION:["Create posting rules, and require people to agree before they become a member."],PRIVACY_HEADING:["Privacy"],PRIVACY_DESCRIPTION:["Control what non-members can see on your group page, and your groupâ€™s overall privacy level."],EIGHTEEN_PLUS_HEADING:["18+"],EIGHTEEN_PLUS_DESCRIPTION:["Running an 18+ group? Itâ€™s best to tell people up front."],ABOUT_YOUR_GROUP:["About your group"],NAME_URL_DESCRIPTION_HEADING:["Name/URL/Description"],NAME_URL_DESCRIPTION_DESCRIPTION:["Describe your group; link to an external website."],KEYWORDS_HEADING:["Keywords"],KEYWORDS_DESCRIPTION:["Help people find your group by assigning some keywords that people can search for."],WEB_ADDRESS_HEADING:["Flickr web address"],WEB_ADDRESS_DESCRIPTION:["You can create an alias for your group so you can direct people to an easy-to-read URL, that will look like http://www.flickr.com/groups/alias/."],MEMBER_ROLES_HEADING:["Member Roles"],MEMBER_ROLES_DESCRIPTION:['Give "administrator," "moderator" and "member" more descriptive names that fit your group'],PENDING_ITEMS_TITLE:["Pending items (","${countString}",")"],PENDING_QUEUE_EMPTY:["The pending queue is empty."],NO_BATCH_ACTIONS:["Do not apply batch actions"],REMOVE:["Remove"],BAN:["Ban"],REMOVE_USER_TITLE:['Remove <span class="username">',"${username}","</span>?"],REMOVE_USER_MESSAGE:["When you remove a member, they are temporarily ejected from your group. They will be able to rejoin any time they wish through the normal channels."],BAN_USER_TITLE:['Ban <span class="username">',"${username}","</span>?"],BAN_USER_MESSAGE:["When you ban a member from your group it is permanent (unless you choose to remove the ban!). If you choose to reinstate banned people, this means they are free to rejoin your group by normal means if they wish."],ALSO_REMOVE_ITEMS:['Also remove <span class="username">',"${username}","</span>â€™s items?"],APPROVE:["Approve"],DENY:["Deny"],TAGS_TITLE:["Tags:"],MANAGE:["Manage"],OLDEST_FIRST:["Oldest first"],NEWEST_FIRST:["Newest first"],LOAD_SIZE_TITLE:["Load size:"],BATCH_TITLE:["Batch:"],BATCH_OF_ITEMS_LABEL:["Batch of ",{type:"plural",valueName:"itemCount",options:{one:["${countString}"," item"],other:["${countString}"," items"]}},":"],APPROVE_ALL:["Approve all"],DENY_ALL:["Deny all"],SHOWING_RANGE_OF_PENDING_ITEMS:["Showing ","${minCountString}","-","${maxCountString}"," of ",{type:"plural",valueName:"totalCount",options:{one:["${totalCountString}"," pending item"],other:["${totalCountString}"," pending items"]}}],ITEM_QUEUED_FOR_REMOVAL:["This item is queued for removal."],GO_TO_PHOTO_POOL:["Go to photo pool"],SAVE_FOR_LATER:["Save for later"]})},"@VERSION@",{requires:["intl"]});YUI.add("hermes-lang-settings-notifications",function(o,e){o.Intl.add("hermes/settings-notifications","en-US",{COMMENT_OWN_PHOTOS:["Comments on your photos"],COMMENT_OTHER_PHOTOS:["Comments on photos youâ€™ve commented on"],MESSAGES_FLICKRMAIL:["Messages (FlickrMail)"],EMAILS_HEADER:["Emails we send you"],PHOTO_ACTIVITY:["Activity on you or your photos"],GROUP_INVITATIONS:["Group invitations"],NEW_FOLLOWERS:["New followers"],PEOPLE_ONLY:["Only People I follow, please"],RECENT_UPLOADS:["Recent uploads from people you follow"],FRIENDS_AND_FAMILY_ONLY:["Only Friends & family, please"],IMMEDIATELY:["Immediately"],ONCE_PER_DAY:["Once per day"],ONCE_PER_WEEK:["Once per week"],GROUP_NOTIFICATIONS:["Group notifications"],GROUPS_NOTIFICATION_SUBTEXT:["Weâ€™ll notify you about new discussions, admin blasts, changes to rules, and descriptions, and status of your pending photos"]})},"@VERSION@",{requires:["intl"]});