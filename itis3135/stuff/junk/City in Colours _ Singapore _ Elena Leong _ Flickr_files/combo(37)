YUI.add("hermes-template-feed-new-page",function(t,n){var e=t.Template.Handlebars.revive({1:function(t,n,e,l,a){var o,i=t.lookupProperty||function(t,n){if(Object.prototype.hasOwnProperty.call(t,n))return t[n]};return'\t<div class="feed-b">\n'+(null!=(o=t.invokePartial(i(l,"prbd-moola-position"),n,{name:"prbd-moola-position",hash:{upgradeProLink:null!=(o=null!=n?i(n,"bannerAdConfig"):n)?i(o,"upgradeProLink"):o,audienceTargets:null!=(o=null!=n?i(n,"bannerAdConfig"):n)?i(o,"audienceTargets"):o,upsellFallback:!0,class:"feed-ba",adUnit:null!=(o=null!=n?i(n,"bannerAdConfig"):n)?i(o,"adUnit"):o},data:a,indent:"\t\t",helpers:e,partials:l,decorators:t.decorators}))?o:"")+"\t</div>\n"},3:function(t,n,e,l,a){return" selected"},compiler:[8,">= 4.3.0"],main:function(t,n,e,l,a){var o,i,s=null!=n?n:t.nullContext||{},r=t.hooks.helperMissing,d=t.escapeExpression,c=t.lookupProperty||function(t,n){if(Object.prototype.hasOwnProperty.call(t,n))return t[n]};return"\n"+d((c(e,"outlet")||n&&c(n,"outlet")||r).call(s,null!=n?c(n,"global-nav-view"):n,{name:"outlet",hash:{},data:a,loc:{start:{line:2,column:0},end:{line:2,column:26}}}))+"\n\n"+(null!=(o=c(e,"if").call(s,null!=n?c(n,"showFeedBannerAd"):n,{name:"if",hash:{},fn:t.program(1,a,0),inverse:t.noop,data:a,loc:{start:{line:4,column:0},end:{line:8,column:7}}}))?o:"")+'\n<div class="feed-new-page-container fluid-centered">\n\t<div class="feed-new-page-content-container">\n\t\t<div class="feed-column">\n\t\t\t<div class="feed-new-tools-container">\n\t\t\t\t<div class="filter-container">\n\t\t\t\t\t<div role="button" class="filter-menu-button">\n\t\t\t\t\t\t<span class="filter-menu-text">'+d("function"==typeof(i=null!=(i=c(e,"filterName")||(null!=n?c(n,"filterName"):n))?i:r)?i.call(s,{name:"filterName",hash:{},data:a,loc:{start:{line:16,column:37},end:{line:16,column:51}}}):i)+'</span>\n\t\t\t\t\t\t<span class="arrow">\n\t\t\t\t\t\t\t<svg class="icon icon-dropdown_arrow"><use xlink:href="#icon-dropdown_arrow"></use></svg>\n\t\t\t\t\t\t</span>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class="layout-tabs-container">\n\t\t\t\t\t<div class="layout-tabs">\n\t\t\t\t\t\t<a role="button" class="tab compact'+(null!=(o=(c(e,"ifCond")||n&&c(n,"ifCond")||r).call(s,null!=n?c(n,"layoutType"):n,"===","compact",{name:"ifCond",hash:{},fn:t.program(3,a,0),inverse:t.noop,data:a,loc:{start:{line:24,column:41},end:{line:24,column:99}}}))?o:"")+'" data-layout-type=\'compact\'>\n\t\t\t\t\t\t\t<svg class="icon icon-thumbnail_small"><use xlink:href="#icon-thumbnail_small"></use></svg>\n\t\t\t\t\t\t</a>\n\t\t\t\t\t\t<a role="button" class="tab medium'+(null!=(o=(c(e,"ifCond")||n&&c(n,"ifCond")||r).call(s,null!=n?c(n,"layoutType"):n,"===","medium",{name:"ifCond",hash:{},fn:t.program(3,a,0),inverse:t.noop,data:a,loc:{start:{line:27,column:40},end:{line:27,column:97}}}))?o:"")+'" data-layout-type=\'medium\'>\n\t\t\t\t\t\t\t<svg class="icon icon-thumbnail_justified"><use xlink:href="#icon-thumbnail_justified"></use></svg>\n\t\t\t\t\t\t</a>\n\t\t\t\t\t\t<a role="button" class="tab large'+(null!=(o=(c(e,"ifCond")||n&&c(n,"ifCond")||r).call(s,null!=n?c(n,"layoutType"):n,"===","large",{name:"ifCond",hash:{},fn:t.program(3,a,0),inverse:t.noop,data:a,loc:{start:{line:30,column:39},end:{line:30,column:95}}}))?o:"")+'" data-layout-type=\'large\'>\n\t\t\t\t\t\t\t<svg class="icon icon-thumbnail_large"><use xlink:href="#icon-thumbnail_large"></use></svg>\n\t\t\t\t\t\t</a>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<a role="button" class="load-top-button hidden">'+d((c(e,"intlMessage")||n&&c(n,"intlMessage")||r).call(s,{name:"intlMessage",hash:{intlName:"feed.SHOW_NEWER_ITEMS"},data:a,loc:{start:{line:36,column:51},end:{line:36,column:99}}}))+'</a>\n\t\t\t<div class="list-loader top-loader hidden">\n'+(null!=(o=t.invokePartial(c(l,"flickr-balls"),n,{name:"flickr-balls",data:a,indent:"\t\t\t\t",helpers:e,partials:l,decorators:t.decorators}))?o:"")+'\t\t\t</div>\n\t\t\t<div class="feed-column-content">\n\t\t\t\t<div class="dummy-loader-container">\n'+(null!=(o=t.invokePartial(c(l,"feed-column-dummy-loader"),n,{name:"feed-column-dummy-loader",hash:{layoutType:null!=n?c(n,"layoutType"):n},data:a,indent:"\t\t\t\t\t",helpers:e,partials:l,decorators:t.decorators}))?o:"")+'\t\t\t\t</div>\n\t\t\t\t<div class="feed-load-error-container hidden">\n\t\t\t\t\t<span class="error-message">'+d((c(e,"preventOrphans")||n&&c(n,"preventOrphans")||r).call(s,(c(e,"intlMessage")||n&&c(n,"intlMessage")||r).call(s,{name:"intlMessage",hash:{intlName:"feed.FEED_SLOW"},data:a,loc:{start:{line:45,column:50},end:{line:45,column:89}}}),{name:"preventOrphans",hash:{},data:a,loc:{start:{line:45,column:33},end:{line:45,column:91}}}))+'</span>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div class="list-loader bottom-loader hidden">\n'+(null!=(o=t.invokePartial(c(l,"flickr-balls"),n,{name:"flickr-balls",data:a,indent:"\t\t\t\t",helpers:e,partials:l,decorators:t.decorators}))?o:"")+'\t\t\t</div>\n\t\t</div>\n\t\t<div class="info-column">\n\t\t\t<div class="info-column-spacer"></div>\n\t\t\t<div class="info-content-container">\n\t\t\t\t'+d((c(e,"outlet")||n&&c(n,"outlet")||r).call(s,null!=n?c(n,"feed-rail-view"):n,{name:"outlet",hash:{},data:a,loc:{start:{line:55,column:4},end:{line:55,column:29}}}))+"\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</div>\n\n"+d((c(e,"outlet")||n&&c(n,"outlet")||r).call(s,null!=n?c(n,"foot-banner-holder-view"):n,{name:"outlet",hash:{},data:a,loc:{start:{line:61,column:0},end:{line:61,column:34}}}))+"\n"},usePartial:!0,useData:!0}),l={};t.Array.each(["prbd-moola-position","flickr-balls","feed-column-dummy-loader","flickr-balls"],function(n){var e=t.Template.get("hermes/"+n);e&&(l[n]=e)}),t.Template.register("hermes/feed-new-page",function(n,a){return a=a||{},a.partials=a.partials?t.merge(l,a.partials):l,e(n,a)})},"@VERSION@",{requires:["template-base","handlebars-base","hermes-template-prbd-moola-position","hermes-template-flickr-balls","hermes-template-feed-column-dummy-loader","hermes-template-flickr-balls"]});YUI.add("hermes-template-head-meta",function(e,n){var a=e.Template.Handlebars.revive({1:function(e,n,a,t,l){return'name="'},3:function(e,n,a,t,l){return'property="'},5:function(e,n,a,t,l){return'description="'+e.escapeExpression(e.lambda(n,n))+'"'},compiler:[8,">= 4.3.0"],main:function(e,n,a,t,l){var r,o,i,m=null!=n?n:e.nullContext||{},s=e.hooks.helperMissing,c=e.escapeExpression,u=e.lookupProperty||function(e,n){if(Object.prototype.hasOwnProperty.call(e,n))return e[n]},p="<meta "+(null!=(r=u(a,"if").call(m,null!=n?u(n,"isName"):n,{name:"if",hash:{},fn:e.program(1,l,0),inverse:e.program(3,l,0),data:l,loc:{start:{line:1,column:6},end:{line:1,column:51}}}))?r:"")+c("function"==typeof(o=null!=(o=u(a,"metaName")||(null!=n?u(n,"metaName"):n))?o:s)?o.call(m,{name:"metaName",hash:{},data:l,loc:{start:{line:1,column:51},end:{line:1,column:63}}}):o)+'" content="'+c((u(a,"renderMetaInfo")||n&&u(n,"renderMetaInfo")||s).call(m,null!=n?u(n,"metaValue"):n,{name:"renderMetaInfo",hash:{},data:l,loc:{start:{line:1,column:74},end:{line:1,column:102}}}))+'" ';return o=null!=(o=u(a,"metaDescription")||(null!=n?u(n,"metaDescription"):n))?o:s,i={name:"metaDescription",hash:{},fn:e.program(5,l,0),inverse:e.noop,data:l,loc:{start:{line:1,column:104},end:{line:1,column:163}}},r="function"==typeof o?o.call(m,i):o,u(a,"metaDescription")||(r=e.hooks.blockHelperMissing.call(n,r,i)),null!=r&&(p+=r),p+' data-dynamic="true">\n'},useData:!0}),t={};e.Array.each([],function(n){var a=e.Template.get("hermes/"+n);a&&(t[n]=a)}),e.Template.register("hermes/head-meta",function(n,l){return l=l||{},l.partials=l.partials?e.merge(t,l.partials):t,a(n,l)})},"@VERSION@",{requires:["template-base","handlebars-base"]});YUI.add("hermes-template-ad-card",function(a,e){var n=a.Template.Handlebars.revive({1:function(a,e,n,t,l){return" theme-flat"},compiler:[8,">= 4.3.0"],main:function(a,e,n,t,l){var r,o=a.lookupProperty||function(a,e){if(Object.prototype.hasOwnProperty.call(a,e))return a[e]};return'<div class="ad-card\n\t'+(null!=(r=(o(n,"ifCond")||e&&o(e,"ifCond")||a.hooks.helperMissing).call(null!=e?e:a.nullContext||{},null!=e?o(e,"theme"):e,"===","flat",{name:"ifCond",hash:{},fn:a.program(1,l,0),inverse:a.noop,data:l,loc:{start:{line:2,column:1},end:{line:2,column:53}}}))?r:"")+'">\n\t<div class="ad-content-container">\n'+(null!=(r=a.invokePartial(o(t,"prbd-moola-position"),e,{name:"prbd-moola-position",hash:{upgradeProLink:null!=(r=null!=e?o(e,"adConfig"):e)?o(r,"upgradeProLink"):r,audienceTargets:null!=(r=null!=e?o(e,"adConfig"):e)?o(r,"audienceTargets"):r,upsellFallback:!0,adUnit:null!=(r=null!=e?o(e,"adConfig"):e)?o(r,"adUnit"):r},data:l,indent:"\t\t",helpers:n,partials:t,decorators:a.decorators}))?r:"")+"\t</div>\n</div>"},usePartial:!0,useData:!0}),t={};a.Array.each(["prbd-moola-position"],function(e){var n=a.Template.get("hermes/"+e);n&&(t[e]=n)}),a.Template.register("hermes/ad-card",function(e,l){return l=l||{},l.partials=l.partials?a.merge(t,l.partials):t,n(e,l)})},"@VERSION@",{requires:["template-base","handlebars-base","hermes-template-prbd-moola-position"]});YUI.add("flickr-photos-recommendations-feedback-add-updater",function(e,r){"use strict";e.namespace("ModelUpdaters")["flickr-photos-recommendations-feedback-add"]={run:function(o,d){var c={};return c.photo_id=o.photoId,c.rec_id=o.recId,d.callAPI("flickr.photos.recommendations.feedback.add",c).then(null,e.FetcherErrorLogger(r))}}},"@VERSION@",{requires:["flickr-promise"]});YUI.add("activity-model",function(e,t){function r(e){r.superclass.constructor.call(this,e)}e.Models[this.name]=r,e.extend(r,e.FlickrModelRegistry,{langBundles:this.details.langBundles,name:this.name,remote:{},attributes:{photos:{isCollection:!0,pageFetch:{listFetcher:e.ListFetchers["flickr-feed-getBatchPhotos"]}},photoPrivacies:{isCollection:!0},time:{},count:{validator:function(t){return e.AttributeHelpers.validateInteger(t)},setter:function(t){return e.AttributeHelpers.coerceInteger(t)},defaultValue:0},photosCount:{validator:function(t){return e.AttributeHelpers.validateInteger(t)},setter:function(t){return e.AttributeHelpers.coerceInteger(t)},defaultValue:0},videosCount:{validator:function(t){return e.AttributeHelpers.validateInteger(t)},setter:function(t){return e.AttributeHelpers.coerceInteger(t)},defaultValue:0},recommended:{validator:function(t){return e.AttributeHelpers.validateBoolean(t)},setter:function(t){return e.AttributeHelpers.coerceBoolean(t)},defaultValue:!1},curated:{validator:function(t){return e.AttributeHelpers.validateBoolean(t)},setter:function(t){return e.AttributeHelpers.coerceBoolean(t)},defaultValue:!1},eventType:{validator:function(t){return e.AttributeHelpers.validateString(t)},setter:function(t){return e.AttributeHelpers.coerceString(t)}},ownerId:{validator:function(t){return e.AttributeHelpers.validateString(t)},setter:function(t){return e.AttributeHelpers.coerceString(t)}},groupId:{validator:function(t){return e.AttributeHelpers.validateString(t)},setter:function(t){return e.AttributeHelpers.coerceString(t)}},groupName:{validator:function(t){return e.AttributeHelpers.validateString(t)},setter:function(t){return e.AttributeHelpers.coerceString(t)}},recId:{validator:function(t){return e.AttributeHelpers.validateString(t)},setter:function(t){return e.AttributeHelpers.coerceString(t)}},isDisabled:{validator:function(t){return e.AttributeHelpers.validateBoolean(t)},setter:function(t){return e.AttributeHelpers.coerceBoolean(t)},defaultValue:!1},iconUrls:{},data:{},isStaticContent:{readOnly:!0,derivedBy:["eventType"],defaultFn:function(e){return"StaticContent_General"===this.getValue(e,"eventType")||"StaticContent_Help"===this.getValue(e,"eventType")}},isStaticHelp:{readOnly:!0,derivedBy:["eventType"],defaultFn:function(e){return"StaticContent_Help"===this.getValue(e,"eventType")}},staticAttribution:{readOnly:!0,derivedBy:["eventType"],defaultFn:function(e){var t=this.getValue(e,"eventType"),r="";return t&&(r="StaticContent_General"===t?this.intlMessage({intlName:"feed.FLICKR_EDITORIAL"}):"StaticContent_Help"===t?this.intlMessage({intlName:"feed.FLICKR_HELP"}):"Flickr"),r}},people:[]}},{})},"@VERSION@",{requires:["flickr-model-registry","flickr-promise","flickr-feed-getFeed-fetcher","photo-model-helper"],langBundles:["models","feed"]});YUI.add("flickr-feed-getFeed-fetcher",function(e,t){"use strict";function o(e,t){var o={event_types:e.eventTypes,rec_pos:12,extras:"all_sizes,icon_urls_deep,needs_interstitial,safety_level",get_user_info:1,per_batch:e.perBatch||5};e.relationshipFilter&&(o.relationship_filter=e.relationshipFilter);var r="General,Help";return t.flipper.isFlipped("enable-feed-sponsored-cards")&&(r+=",Sponsored"),o.static_content_types=r,e.invalidate&&(o.invalidate=(new Date).getTime()),"start"in e||"end"in e?(o.batchid=e.batchId||0,"start"in e&&(o.start=e.start),"end"in e&&(o.end=e.end)):(o.per_page=e.perPage||30,o.page=e.page||1),o}e.namespace("ListFetchers")["flickr-feed-getFeed"]={run:function(r,a){var i=this,s=o(r,a);return e.Promise.all([a.callAPI("flickr.feed.getFeed",s,!0),a.getModelRegistry("activity-models"),a.getModelRegistry("activity-model"),a.getModelRegistry("photo-models"),a.getModelRegistry("person-models"),a.getModelRegistry("photo-engagement-models"),a.getModelRegistry("photo-stats-models"),a.getModelRegistry("photo-privacy-models")]).then(function(e){return i._processResponse(e,s,r,a)},e.FetcherErrorLogger(t))},_processParams:o,_processResponse:function(t,o,r,a){var i=t[0].photos,s=t[1],n=t[2],p=t[3],d=t[4],l=t[5],c=t[6],h=t[7],g={id:r.id,totalItems:i.total},m=[];return i.photo.forEach(function(t){var o,r={},a=[];if(t.count>0){r.isDisabled=!1,r.time=t.time,r.iconUrls=t.iconurls,r.id=t.batchid,r.recommended=t.recommended,r.curated=t.curated,r.eventType=t.eventType||"UploadBatch",r.count=t.count,r.videosCount=parseInt(t.countVideo,10)||0,r.photosCount=parseInt(t.countPhoto,10)||0,"GroupBatch"===t.eventType?(r.groupId=t.owner,r.groupName=t.ownername):t.eventType.indexOf("StaticContent")>-1?(r.groupId=!1,r.data=t.data):"Flickrec"===t.eventType?r.recId=t.photos[0].recommendation_id:r.ownerId=t.owner,o=e.APIHelper.response.parsePhotos({photos:t.photos,personModelRegistry:d,photoModelRegistry:p,photoEngagementModelRegistry:l,photoStatsModelRegistry:c}),r.photos=o;var i=[];t.photos.forEach(function(e){var t={id:e.id,isPublic:e.ispublic,isVisibleByFriends:e.isfriend,isVisibleByFamily:e.isfamily};i.push(h.addOrUpdate(t))}),r.photoPrivacies=i,t.people&&t.people.forEach(function(t){var o=t.person,r={id:o.id,pathAlias:o.pathAlias,username:o.username&&o.username._content,realname:o.realname&&o.realname._content,buddyicon:e.APIHelper.response.removeProtocolFromURL(o.iconurls),isAdFree:o.isAdFree,isPro:o.ispro,proBadge:o.proBadge,isMinor:o.isMinor,hasStats:o.hasStats,location:o.location&&o.location._content,hasAdfree:o.hasAdfree,has1TB:o.has1TB,has2TB:o.has2TB,hasUnlimitedStorage:o.hasUnlimitedStorage,hasFreeStandardShipping:o.hasFreeStandardShipping,hasFreeEducationalResources:o.hasFreeEducationalResources,expiringPartner:o.expiringPartner},i=d.addOrUpdate(r);a.push({id:o.id,coverPhotoUrls:e.APIHelper.response.removeProtocolFromURL(o.coverphoto_url),model:i})}),r.people=a,m.push(n.addOrUpdate(r))}}),g.activityList={perPage:i.perPage,page:i.page||1,pageContent:m,totalItems:i.total,totalPages:i.pages},s.addOrUpdate(g),{beforeCount:i.remaining_before,afterCount:i.remaining_after,activityModels:g.activityList.pageContent}}}},"@VERSION@",{requires:["flickr-promise","api-helper"],optional:["activity-models","activity-model","photo-models","person-models","photo-engagement-models","photo-stats-models","photo-privacy-models"]});YUI.add("activity-models",function(e,t){function n(e){n.superclass.constructor.call(this,e)}e.Models[this.name]=n,e.extend(n,e.FlickrModelRegistry,{langBundles:this.details.langBundles,name:this.name,remote:{read:function(t){return e.ListFetchers["flickr-feed-getFeed"].run(t,this.appContext)},updateRecommendedFeedback:function(t,n){return e.ModelUpdaters["flickr-photos-recommendations-feedback-add"].run(t,n)}},updateRecommendedFeedbackRemote:function(e,t,n){return this.remote.updateRecommendedFeedback.call(this,{recId:n,photoId:t},this.appContext)},readLastUpdateRemote:function(){return this.appContext.callAPI("flickr.activity.lastUpdate",{}).then(function(e){return e&&e.activity&&e.activity.lastUpdate?e.activity.lastUpdate:null})},insertUserPrefsRemote:function(e,t){return this.appContext.callAPI("flickr.feed.preferences.insertUserPreferences",t).then(function(e){return e},function(e){return e})},muteObject:function(e,t){return this.appContext.callAPI("flickr.feed.preferences.muteObject",t).then(function(e){return e},function(e){return e})},unMuteObject:function(e,t){return this.appContext.callAPI("flickr.feed.preferences.unmuteObject",t).then(function(e){return e},function(e){return e})},muteEventType:function(e,t){return this.appContext.callAPI("flickr.feed.preferences.muteEventType",t).then(function(e){return e},function(e){return e})},attributes:{activityList:{isCollection:!0,pageFetch:{listFetcher:e.ListFetchers["flickr-feed-getFeed"]}},totalItems:{defaultFn:function(){return null}}}},{})},"@VERSION@",{requires:["flickr-model-registry","flickr-promise","flickr-feed-getFeed-fetcher","flickr-photos-recommendations-feedback-add-updater","photo-model-helper"],langBundles:["models"]});